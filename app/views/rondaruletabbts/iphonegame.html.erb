<!DOCTYPE html>
<html>
  <head>
  <meta name="viewport" content="width=device-width, initial-scale=1">
      <style>
          body, html {
            height: 100%;
            margin: 0;
            background-color: darkred;
          }

          .bg {
            /* The image used */
             /* background-image: url(br1.jpg);  */
            position: relative;
           /* left: 10px; */
           /* top: 10px; */

            width: 360px; 
            height: 559px;

             background-image: url("../br1.jpg"); 

           /* background-image: url('<%= asset_path 'br1.jpg' %>');*/

           /* background-image: url("br1.jpg") */

            /* Full height */
           /*   height: 100%;  */

            /* Center and scale the image nicely */
            background-position: center;
            background-repeat: no-repeat;
            background-size: cover;
          }

          .pwd_div {
            /* The image used */
             /* background-image: url(br1.jpg);  */
            position: relative;
           /* left: 10px; */
           /* top: 10px; */
            padding: 4px 0px;
            width: 272px; 
            height: 72px;

             background-color: yellow;

           /* background-image: url('<%= asset_path 'br1.jpg' %>');*/

           /* background-image: url("br1.jpg") */

            /* Full height */
           /*   height: 100%;  */

            /* Center and scale the image nicely */
            background-position: center;
            background-repeat: no-repeat;
            background-size: cover;
          }

           .win_display_iphone6s{
            background-color: red;
            color: white;
            font-size: 16px;
            border-radius: 10%;
            padding: 0px 1px;
            position: absolute;
            left: 82px;
            top: 76px;
             /*border: 2px transparent;         AQUI LUZ*/  
             /* border: 0px solid #4CAF50;*/
             border: 0px transparent; */             
          }

           .credit_display_iphone6s{
            background-color: red;
            color: white;
            font-size: 16px;
            border-radius: 10%;
            padding: 0px 1px;
            position: absolute;
            left: 245px;
            top: 76px;
             /*border: 2px transparent; */  
             /* border: 0px solid #4CAF50;*/
             border: 0px transparent; */           
          }

          .black_jackpot_display{
            background-color: black;
            color: white;
            font-size: 20px;
            border-radius: 10%;
            padding: 3px 3px;
            position: absolute;
            left: 123px;
            top: 141px;
             /*border: 2px transparent; */  
             /* border: 0px solid #4CAF50;*/
             border: 0px transparent; */             
          }

          .red_jackpot_display{
            background-color: darkred;
            color: white;
            font-size: 20px;
            border-radius: 10%;
            padding: 3px 3px;
            position: absolute;
            left: 200px;
            top: 141px;
             /*border: 2px transparent; */  
             /* border: 0px solid #4CAF50;*/
             border: 0px transparent; */             
          }

           .spin_display_iphone6s{
            color: yellow;
            font-size: 10px;
            border-radius: 50%;
            padding: 2px 2px;
            position: absolute;
            background-color: yellow;
            /* left: 194px;  ajustar esta coodenada para cada btn */ 
            /* top: 62px;    ajustar esta coodenada para cada btn */ 
             /*border: 2px transparent; */  
              border: 0.5px solid gray;*/
           /*  border: 0px transparent; */             
          }

           .logout_basic{
            color: white;
            font-size: 8px;
            border-radius: 20%;
            padding: 2px 2px;
            position: absolute;
            background-color: darkgreen;
            /* left: 194px;  ajustar esta coodenada para cada btn */ 
            /* top: 62px;    ajustar esta coodenada para cada btn */ 
             /*border: 2px transparent; */  
              border: 0.5px solid gray;*/
           /*  border: 0px transparent; */             
          }

          
           .pwd_class{
            color: white;
            font-size: 10px;
            border-radius: 20%;
            padding: 2px 2px;
            position: absolute;
            background-color: darkred;
            /* left: 194px;  ajustar esta coodenada para cada btn */ 
            /* top: 62px;    ajustar esta coodenada para cada btn */ 
             /*border: 2px transparent; */  
              border: 0.5px solid gray;*/
           /*  border: 0px transparent; */ 
            width: 1px; 
            height: 10px;            
          }

          .pwd_change_btn_class{
            color: white;
            font-size: 10px;
            border-radius: 20%;
            padding: 2px 2px;
            position: absolute;
            background-color: darkgreen;
            /* left: 194px;  ajustar esta coodenada para cada btn */ 
            /* top: 62px;    ajustar esta coodenada para cada btn */ 
             /*border: 2px transparent; */  
              border: 0.5px solid gray;*/
           /*  border: 0px transparent; */             
          }


           .button_cancel_iphone6s{
            font-size: 6px;
            border-radius: 10%;
            padding: 6px 4px;
            position: absolute;
            left: 65px;
            top: 144px;
             /*border: 2px transparent; */  
             /* border: 0px solid #4CAF50;*/
             
              background-color: yellow;

            /* font-size: 8px; border-radius: 10%; padding: 2px 2px;  */
          }

          .button_start_iphone6s{
            font-size: 6px;
            border-radius: 10%;
            padding: 6px 4px;
            position: absolute;
            left: 265px;
            top: 144px;
            visibility: hidden;
             /*border: 2px transparent; */  
             /* border: 0px solid #4CAF50;*/
             
              background-color: red;

            /* font-size: 8px; border-radius: 10%; padding: 2px 2px;  */
          }

          .button_prestart_iphone6s{
            color: black;
            font-size: 6px;
            border-radius: 10%;
            padding: 6px 4px;
            position: absolute;
            left: 265px;
            top: 144px;
             /* visibility: hidden; Debe de verse este ok. */
             /*border: 2px transparent; */  
             /* border: 0px solid #4CAF50;*/
             
              background-color: red;

            /* font-size: 8px; border-radius: 10%; padding: 2px 2px;  */
          }



          .button_iphone6s{
            font-size: 7px; /*Estaba en 6 iph anteriromente ok ted */
            border-radius: 10%;
            padding: 3px 6px;
            position: absolute;
          /*  left: 124px; ajustar esta coodenada para cada btn */ 
          /*  top: 155px;  ajustar esta coodenada para cada btn */  
             /*border: 2px transparent; */  
             /* border: 0px solid #4CAF50;*/
             
            background-color: yellow;

            /* font-size: 8px; border-radius: 10%; padding: 2px 2px;  */
          }

          .footer_button{
            font-size: 8px; /*Estaba en 6 iph anteriromente ok ted */
            border-radius: 30%;
            padding: 3px 1px;
            position: absolute;
            color: gray;
          /*  left: 124px; ajustar esta coodenada para cada btn */ 
          /*  top: 155px;  ajustar esta coodenada para cada btn */  
             /*border: 2px transparent; */  
             /* border: 0px solid #4CAF50;*/
             
            /* background-color: darkgreen; */

            /* font-size: 8px; border-radius: 10%; padding: 2px 2px;  */
          }



          .button_ejemplo {
            background-color: #4CAF50; /* Green */
            border: none;
            color: white;
            padding: 4px 4px;
            text-align: center;
            text-decoration: none;
            display: inline-block;
            font-size: 5px;
          }

          @font-face{
           font-family:'digital-clock-font';
           src: url('digital-7.mono.ttf');
          }

      </style>

  </head>

<script type="text/javascript">
  //  alert("Your screen resolution is: " + screen.width + "x" + screen.height);
</script>

<!--ESTA PARTE JS CONTROLA EL VERTICAL MODE OPERATION (PARA IOS) OK.: -->
 <!-- link: http://www.williammalone.com/articles/html5-javascript-ios-orientation/ -->
  <script type="text/javascript">

       function readDeviceOrientation() {
                      
          if (Math.abs(window.orientation) === 90) {
              // Landscape
             document.write("Cannot Play horizontal mode." +  '<script type="text/javascript"> function readDeviceOrientation() { window.location.reload(); } window.onorientationchange = readDeviceOrientation;' + " <\/script>" );

          } else {
            // Portrait
            window.location.reload(); 
          }
       }

     window.onorientationchange = readDeviceOrientation;

  </script>



<!--Evitar refresh page on touchcreen on pull-down ok, poner esto en el css del body o como style ok style="overscroll-behavior-y: contain; -->
  <body onload="refresh_credit();timer_jackpot_refresh_and_animation();" style="overscroll-behavior-y: contain;" > 

  <!--   <audio id="sound1" src="../musicafondojuego.mp3" preload="auto"></audio> -->
    <audio id="sound2" src="https://sndup.net/5hff/ruletasonido.mp3" preload="auto"></audio>
    <audio id="sound3" src="https://sndup.net/5334/vacia.mp3" preload="auto"></audio>
    <audio id="sound4" src="https://sndup.net/7psm/sonidoseleccion.mp3" preload="auto"></audio>
    <audio id="sound5" src="https://sndup.net/2mrk/winnerspinsound.mp3" preload="auto"></audio>
    <audio id="sound6" src="https://sndup.net/5z5t/cobrowin.mp3" preload="auto"></audio> <!--coins -->
    <audio id="sound7" src="https://sndup.net/6mbz/cobrocredit.mp3" preload="auto"></audio>
    <audio id="sound8" src="https://sndup.net/3pxh/tadan.mp3" preload="auto"></audio> <!--tadan -->


    <audio id="sound50" src="../xp.mp3" preload="auto"></audio>

     <audio id="sound20" src="../sonidoseleccion.mp3" preload="auto"></audio>
     <audio id="sound21" src="../sonidoseleccion.mp3" preload="auto"></audio>
     <audio id="sound22" src="../sonidoseleccion.mp3" preload="auto"></audio>
     <audio id="sound23" src="../sonidoseleccion.mp3" preload="auto"></audio>
     <audio id="sound24" src="../sonidoseleccion.mp3" preload="auto"></audio>
     <audio id="sound25" src="../sonidoseleccion.mp3" preload="auto"></audio>
     <audio id="sound26" src="../sonidoseleccion.mp3" preload="auto"></audio>
     <audio id="sound27" src="../sonidoseleccion.mp3" preload="auto"></audio>
     <audio id="sound28" src="../sonidoseleccion.mp3" preload="auto"></audio>
     <audio id="sound29" src="../sonidoseleccion.mp3" preload="auto"></audio>
     <audio id="sound30" src="../sonidoseleccion.mp3" preload="auto"></audio>
     <audio id="sound31" src="../sonidoseleccion.mp3" preload="auto"></audio>
     <audio id="sound32" src="../sonidoseleccion.mp3" preload="auto"></audio>




<script type="text/javascript">
 // alert("Your screen resolution is: " + screen.width + "x" + screen.height);
  //alert("Your Plataform is: " + navigator.appVersion);
  // document.body.style.backgroundImage = "url('br1.jpg')"; 
</script>


<div align="center"> <!-- Este div me permita alinear, el child trabaja la ruleta ok.-->
 <div class="bg">  


<!--INPUTS FOR PASSWORD CHANGE: -->
<div id="pwd_div_id" class="pwd_div" align="left" style="visibility: hidden; " >

 * Old Password: <input type="password" size="16" class="pwd_class" id="current_pwd" name="pwd1"  minlength="6"> <br>

 *New Password:<input type="password" size="16" class="pwd_class" id="new_pwd" name="pwd2"  minlength="6"> <br>
 *New Password:<input type="password" size="16" class="pwd_class" id="new_pwd_confirmation" name="pwd3"  minlength="6">
<button id="pwd_change_btn_ok" class="pwd_change_btn_class"   style="left: 85px; top: 62px;" onclick="gestionar_cambio_clave();" >CHANGE PASSWORD</button>

</div>



<!--BASIC LOGOUT BUTTON -->
 <button id="logout_basic" class="logout_basic"   style="left: 347px; top: 3px;" onclick="logout_basic();" >x</button>


<!--WIN DISPLAY BUTTON -->
 <button style="font-family:'digital-clock-font'" id="win_display" class="win_display_iphone6s" onclick="sonartbn(); autoplay();" >0000</button>


<!--CREDIT DISPLAY BUTTON -->
 <button style="font-family:'digital-clock-font'" id="credit_display" class="credit_display_iphone6s" onclick="sonartbn();cobrar_cashout();" >0000</button>

<!--SPIN DISPLAY BUTTONS -->
 <button id="spin_0" class="spin_display_iphone6s"  disabled="true" style="left: 178px; top: 36px; visibility: hidden; " onclick="sonartbn();" ></button>

 <button id="spin_5" class="spin_display_iphone6s"  disabled="true" style="left: 200px; top: 42px; visibility: hidden; " onclick="sonartbn();" ></button>

 <button id="spin_12" class="spin_display_iphone6s"  disabled="true" style="left: 215px; top: 55px; visibility: hidden; " onclick="sonartbn();" ></button>

 <button id="spin_3" class="spin_display_iphone6s"  disabled="true" style="left: 223px; top: 76px; visibility: hidden; " onclick="sonartbn();" ></button>

 <button id="spin_10" class="spin_display_iphone6s"  disabled="true" style="left: 221px; top: 98px; visibility: hidden; " onclick="sonartbn();" ></button>

 <button id="spin_1" class="spin_display_iphone6s"  disabled="true" style="left: 208px; top: 116px; visibility: hidden; " onclick="sonartbn();" ></button>

 <button id="spin_8" class="spin_display_iphone6s"  disabled="true" style="left: 189px; top: 126px; visibility: hidden; " onclick="sonartbn();" ></button>

 <button id="spin_9" class="spin_display_iphone6s"  disabled="true" style="left: 167px; top: 126px; visibility: hidden; " onclick="sonartbn();" ></button>

 <button id="spin_2" class="spin_display_iphone6s"  disabled="true" style="left: 148px; top: 116px; visibility: hidden; " onclick="sonartbn();" ></button>

 <button id="spin_7" class="spin_display_iphone6s"  disabled="true" style="left: 135px; top: 98px; visibility: hidden; " onclick="sonartbn();" ></button>

 <button id="spin_6" class="spin_display_iphone6s"  disabled="true" style="left: 133px; top: 76px; visibility: hidden; " onclick="sonartbn();" ></button>

 <button id="spin_11" class="spin_display_iphone6s"  disabled="true" style="left: 140px; top: 56px; visibility: hidden; " onclick="sonartbn();" ></button>

 <button id="spin_4" class="spin_display_iphone6s"  disabled="true" style="left: 156px; top: 42px; visibility: hidden; " onclick="sonartbn();" ></button>




<!--CANCEL BUTTON -->
 <button id="btn_cancel" class="button_cancel_iphone6s" onclick="fast_disable_this_btn();sonartbn();refresh_con_delay();" ><b>CANCEL</button> <!--fast_disable_this_btn is for prestart ok. ->


<!--START BUTTON -->
 <button id="btn_start" class="button_start_iphone6s" onclick="sonartbn55();ronda_spin_animation1_off();reset_vuelta_counter();disable_all_panel_button();ronda_spin_game_fast_determiner();" >START</button>

<!--JACKPOTS PANEL -->

<!--BLACK JACKPOT DISPLAY BUTTON -->
 <button style="font-family:'digital-clock-font'" id="black_jackpot_display" disabled="true" class="black_jackpot_display" onclick="sonartbn();" >000</button>

 <!--RED JACKPOT DISPLAY BUTTON -->
 <button style="font-family:'digital-clock-font'" id="red_jackpot_display" disabled="true" class="red_jackpot_display" onclick="sonartbn();" >000</button>




<!--PRESTART BUTTON Este analizara el escenario antes de iniciar musica init, ajax(modify var globar de ronda, ronda-->
 <button id="btn_prestart" class="button_prestart_iphone6s" onclick="fast_disable_this_btn();sonido_animacion1();funcion_ajax();sonartbn();" ><b>START</button> <!--PRESTART BUTTON OK-->

<!--0_BUTTON -->
      <button id="btn_0_1" class="button_iphone6s" style="left: 137px; top: 190px;" onclick="sonartbn();toggle_selection('btn_0_1');" >1</button>
      <button id="btn_0_2" class="button_iphone6s" style="left: 207px; top: 190px;" onclick="sonartbn();toggle_selection('btn_0_2');" >2</button>

      <button id="btn_0_3" class="button_iphone6s" style="left: 137px; top: 224px;" onclick="sonartbn();toggle_selection('btn_0_3');" >3</button>
      <button id="btn_0_4" class="button_iphone6s" style="left: 207px; top: 224px;" onclick="sonartbn();toggle_selection('btn_0_4');" >4</button>


<!--1_BUTTON -->
      <button id="btn_1_1" class="button_iphone6s" style="left: 83px; top: 260px;" onclick="sonartbn();toggle_selection('btn_1_1');" >1</button>
      <button id="btn_1_2" class="button_iphone6s" style="left: 119px; top: 260px;" onclick="sonartbn();toggle_selection('btn_1_2');" >2</button>

      <button id="btn_1_3" class="button_iphone6s" style="left: 83px; top: 295px;" onclick="sonartbn();toggle_selection('btn_1_3');" >3</button>
      <button id="btn_1_4" class="button_iphone6s" style="left: 119px; top: 295px;" onclick="sonartbn();toggle_selection('btn_1_4');" >4</button>


<!--2_BUTTON -->
      <button id="btn_2_1" class="button_iphone6s" style="left: 154px; top: 260px;" onclick="sonartbn();toggle_selection('btn_2_1');" >1</button>
      <button id="btn_2_2" class="button_iphone6s" style="left: 190px; top: 260px;" onclick="sonartbn();toggle_selection('btn_2_2');" >2</button>

      <button id="btn_2_3" class="button_iphone6s" style="left: 154px; top: 295px;" onclick="sonartbn();toggle_selection('btn_2_3');" >3</button>
      <button id="btn_2_4" class="button_iphone6s" style="left: 190px; top: 295px;" onclick="sonartbn();toggle_selection('btn_2_4');" >4</button>



<!--3_BUTTON -->
      <button id="btn_3_1" class="button_iphone6s" style="left: 225px; top: 260px;" onclick="sonartbn();toggle_selection('btn_3_1');" >1</button>
      <button id="btn_3_2" class="button_iphone6s" style="left: 261px; top: 260px;" onclick="sonartbn();toggle_selection('btn_3_2');" >2</button>

      <button id="btn_3_3" class="button_iphone6s" style="left: 225px; top: 294px;" onclick="sonartbn();toggle_selection('btn_3_3');" >3</button>
      <button id="btn_3_4" class="button_iphone6s" style="left: 261px; top: 294px;" onclick="sonartbn();toggle_selection('btn_3_4');" >4</button>




<!--4_BUTTON -->
      <button id="btn_4_1" class="button_iphone6s" style="left: 83px; top: 330px;" onclick="sonartbn();toggle_selection('btn_4_1');" >1</button>
      <button id="btn_4_2" class="button_iphone6s" style="left: 119px; top: 330px;" onclick="sonartbn();toggle_selection('btn_4_2');" >2</button>

      <button id="btn_4_3" class="button_iphone6s" style="left: 83px; top: 365px;" onclick="sonartbn();toggle_selection('btn_4_3');" >3</button>
      <button id="btn_4_4" class="button_iphone6s" style="left: 119px; top: 365px;" onclick="sonartbn();toggle_selection('btn_4_4');" >4</button>


<!--5_BUTTON -->
      <button id="btn_5_1" class="button_iphone6s" style="left: 154px; top: 330px;" onclick="sonartbn();toggle_selection('btn_5_1');" >1</button>
      <button id="btn_5_2" class="button_iphone6s" style="left: 190px; top: 330px;" onclick="sonartbn();toggle_selection('btn_5_2');" >2</button>

      <button id="btn_5_3" class="button_iphone6s" style="left: 154px; top: 365px;" onclick="sonartbn();toggle_selection('btn_5_3');" >3</button>
      <button id="btn_5_4" class="button_iphone6s" style="left: 190px; top: 365px;" onclick="sonartbn();toggle_selection('btn_5_4');" >4</button>



<!--6_BUTTON -->
      <button id="btn_6_1" class="button_iphone6s" style="left: 225px; top: 329px;" onclick="sonartbn();toggle_selection('btn_6_1');" >1</button>
      <button id="btn_6_2" class="button_iphone6s" style="left: 261px; top: 329px;" onclick="sonartbn();toggle_selection('btn_6_2');" >2</button>

      <button id="btn_6_3" class="button_iphone6s" style="left: 225px; top: 364px;" onclick="sonartbn();toggle_selection('btn_6_3');" >3</button>
      <button id="btn_6_4" class="button_iphone6s" style="left: 261px; top: 364px;" onclick="sonartbn();toggle_selection('btn_6_4');" >4</button>




<!--7_BUTTON -->
      <button id="btn_7_1" class="button_iphone6s" style="left: 83px; top: 400px;" onclick="sonartbn();toggle_selection('btn_7_1');" >1</button>
      <button id="btn_7_2" class="button_iphone6s" style="left: 119px; top: 400px;" onclick="sonartbn();toggle_selection('btn_7_2');" >2</button>

      <button id="btn_7_3" class="button_iphone6s" style="left: 83px; top: 435px;" onclick="sonartbn();toggle_selection('btn_7_3');" >3</button>
      <button id="btn_7_4" class="button_iphone6s" style="left: 119px; top: 435px;" onclick="sonartbn();toggle_selection('btn_7_4');" >4</button>


<!--8_BUTTON -->
      <button id="btn_8_1" class="button_iphone6s" style="left: 154px; top: 400px;" onclick="sonartbn();toggle_selection('btn_8_1');" >1</button>
      <button id="btn_8_2" class="button_iphone6s" style="left: 190px; top: 400px;" onclick="sonartbn();toggle_selection('btn_8_2');" >2</button>

      <button id="btn_8_3" class="button_iphone6s" style="left: 154px; top: 435px;" onclick="sonartbn();toggle_selection('btn_8_3');" >3</button>
      <button id="btn_8_4" class="button_iphone6s" style="left: 190px; top: 435px;" onclick="sonartbn();toggle_selection('btn_8_4');" >4</button>



<!--9_BUTTON -->
      <button id="btn_9_1" class="button_iphone6s" style="left: 225px; top: 400px;" onclick="sonartbn();toggle_selection('btn_9_1');" >1</button>
      <button id="btn_9_2" class="button_iphone6s" style="left: 261px; top: 400px;" onclick="sonartbn();toggle_selection('btn_9_2');" >2</button>

      <button id="btn_9_3" class="button_iphone6s" style="left: 225px; top: 435px;" onclick="sonartbn();toggle_selection('btn_9_3');" >3</button>
      <button id="btn_9_4" class="button_iphone6s" style="left: 261px; top: 435px;" onclick="sonartbn();toggle_selection('btn_9_4');" >4</button>




<!--10_BUTTON -->
      <button id="btn_10_1" class="button_iphone6s" style="left: 83px;  top: 470px;" onclick="sonartbn();toggle_selection('btn_10_1');" >1</button>
      <button id="btn_10_2" class="button_iphone6s" style="left: 119px; top: 470px;" onclick="sonartbn();toggle_selection('btn_10_2');" >2</button>

      <button id="btn_10_3" class="button_iphone6s" style="left: 83px; top:  505px;" onclick="sonartbn();toggle_selection('btn_10_3');" >3</button>
      <button id="btn_10_4" class="button_iphone6s" style="left: 119px; top: 505px;" onclick="sonartbn();toggle_selection('btn_10_4');" >4</button>


<!--11_BUTTON -->
      <button id="btn_11_1" class="button_iphone6s" style="left: 154px; top: 470px;" onclick="sonartbn();toggle_selection('btn_11_1');" >1</button>
      <button id="btn_11_2" class="button_iphone6s" style="left: 190px; top: 470px;" onclick="sonartbn();toggle_selection('btn_11_2');" >2</button>

      <button id="btn_11_3" class="button_iphone6s" style="left: 154px; top: 505px;" onclick="sonartbn();toggle_selection('btn_11_3');" >3</button>
      <button id="btn_11_4" class="button_iphone6s" style="left: 190px; top: 505px;" onclick="sonartbn();toggle_selection('btn_11_4');" >4</button>



<!--12_BUTTON -->
      <button id="btn_12_1" class="button_iphone6s" style="left: 225px; top: 470px;" onclick="sonartbn();toggle_selection('btn_12_1');" >1</button>
      <button id="btn_12_2" class="button_iphone6s" style="left: 261px; top: 470px;" onclick="sonartbn();toggle_selection('btn_12_2');" >2</button>

      <button id="btn_12_3" class="button_iphone6s" style="left: 225px; top: 505px;" onclick="sonartbn();toggle_selection('btn_12_3');" >3</button>
      <button id="btn_12_4" class="button_iphone6s" style="left: 261px; top: 505px;" onclick="sonartbn();toggle_selection('btn_12_4');" >4</button>



     <p id="footer_info" class="footer_button" style="left: 175px; top: 535px;" ><%=@current_user_id%></p>


    </div>

    </div>

  </body>

</html>

<script type="text/javascript">
  //crear el array de hash de botones toggeados en la ruleta para seleccionar en apuestas:
  //declaracion de hash y asignacion de valores default no seleccionado.
  var hash_bnt_status =  {btn_0_1: 'n', btn_0_2: 'n', btn_0_3: 'n', btn_0_4: 'n' ,
                          btn_1_1: 'n', btn_1_2: 'n', btn_1_3: 'n', btn_1_4: 'n' ,
                          btn_2_1: 'n', btn_2_2: 'n', btn_2_3: 'n', btn_2_4: 'n' ,
                          btn_3_1: 'n', btn_3_2: 'n', btn_3_3: 'n', btn_3_4: 'n' ,
                          btn_4_1: 'n', btn_4_2: 'n', btn_4_3: 'n', btn_4_4: 'n' ,
                          btn_5_1: 'n', btn_5_2: 'n', btn_5_3: 'n', btn_5_4: 'n' ,
                          btn_6_1: 'n', btn_6_2: 'n', btn_6_3: 'n', btn_6_4: 'n' ,
                          btn_7_1: 'n', btn_7_2: 'n', btn_7_3: 'n', btn_7_4: 'n' ,
                          btn_8_1: 'n', btn_8_2: 'n', btn_8_3: 'n', btn_8_4: 'n' ,
                          btn_9_1: 'n', btn_9_2: 'n', btn_9_3: 'n', btn_9_4: 'n' ,
                          btn_10_1: 'n', btn_10_2: 'n', btn_10_3: 'n', btn_10_4: 'n', 
                          btn_11_1: 'n', btn_11_2: 'n', btn_11_3: 'n', btn_11_4: 'n', 
                          btn_12_1: 'n', btn_12_2: 'n', btn_12_3: 'n', btn_12_4: 'n', 
                         };

  var cantidad_de_jugadas_para_iniciar = 0; // recorre el hash_bnt_status y me dice si se puede iniciar spin round.

  //agregar event listener al <p> user para onclick, gestionar cambio de pwd del user:
  
  document.getElementById("footer_info").addEventListener("click", function(){
     // alert("touched");
      //activar variable global control para start_btn klk
      disable_all_panel_button();
      //Enable CANCEL Button only to cancel/refresh ok:
      document.getElementById('btn_cancel').disabled = false;

      //mostrar los tres inputs de cambio de pwd:
     // document.getElementById('pwd_div')
      document.getElementById('pwd_div_id').style.visibility = "visible"; 

      //activar flad solicitud cambio de pwd
     

  }); 

  var valor = 0;
  var cargado = 1; // verifica que el audio se carge solo la 1ra vez que la pagina carga ok.


  function sonartbn(){
    //aprovecho y desactivo variables de animacion porque hubo un touch ok:
    contador_animacion = 0;
    mq_sola_minutosx5 = 0;
    
    // document.getElementById("spin_0").style.visibility = "visible"; 
    ronda_spin_animation1();

    //tratar de cargar sonidos desde que elijan una tecla en el panel, para que en play esten listos (ios):
    if(cargado < 2){
      cargado++;
      sonido_animacion_loaders();
    }
    document.getElementById('sound4').play();

  }// fin de la funcion sonartbn()

  function sonartbn2(){
    document.getElementById('sound3').play();
   // document.getElementById("spin_0").style.visibility = "visible"; 
    ronda_spin_animation1();
  }

  
  function sonartbn3(){
  //  document.getElementById('sound1').play();
   // document.getElementById("spin_0").style.visibility = "visible"; 
    ronda_spin_animation1();
  }


function sonartbn55(){
    //nada

   // document.getElementById('sound2').play();

  }

function sonarporbtn() {

// document.getElementById('sound1').play();
  //document.getElementById('sound3').play();
  // body...
}




function gestionar_cambio_clave(){
  // body...
 // read values
 // compare values? (server for now)
 // send to server ajax
 // reload page?

 var current_pwd = document.getElementById("current_pwd").value;
// alert(current_pwd);
 var new_pwd = document.getElementById("new_pwd").value;
// alert(new_pwd);
 var new_pwd_confirmation = document.getElementById("new_pwd_confirmation").value;
// alert(new_pwd_confirmation);


        // server side: VERIFICAR QUE LAS JUGADAS NO SOBREPASEN EL MONTO DEL CREDIT.
        var xhttp_cambio_pwd = new XMLHttpRequest();

        xhttp_cambio_pwd.onreadystatechange = function() {
          if (this.readyState == 4 && this.status == 200) {    
              // hacer timeout reload 3segs ok
             //  alert(st_data_pwd_change);
             
             //verificar si inicia con caracter especial (es un reporte mas grande que alert no puede hacer buffer) mostrar en document.write listado ok.
             if (this.responseText[0] == '@'){
             // alert("Mensaje contiene @ al inicio");
             document.write("<h2>" + this.responseText + "</h2>" +  '<script type="text/javascript">  document.body.style.backgroundColor = "green";' + " <\/script>" );

             } else {



               alert(this.responseText); // mostrar mensaje de pwd_change ok or fail from server ok.

               setTimeout(function() {
                 window.location.reload();
               },1000); 

              } // cierre del else condition block         
           } // cierre del if readyState and status flags reader condition ok ted.

        };// cierre del onreadystatechange listener function definition ok.

        var jugador_id_credit_cashout =  document.getElementById("footer_info").innerHTML;
  
        var st_data_pwd_change = "/rondaruletats?credit=change_pwd... j" + jugador_id_credit_cashout + "... " + current_pwd + "... " + new_pwd + "... " + new_pwd_confirmation + "... ";

        //nota: arriba hay un espacio en los 3 puntos esto por si el user deja pwd vacias el split funcione bien en el controller ok.
        
        
        //"..." va a ser para el split en el controller, separar jugador de la ronda ok.

        xhttp_cambio_pwd.open("GET", st_data_pwd_change  , true);
        // Aqui se manda la solicitud de cambio de pwd ok.
        xhttp_cambio_pwd.send();

} // fin de la funcion gestionar_cambio_clave()



function cobrar_cashout(){
   //desactivar botones al inciio y reactivarlos al final de esta funcion ok ted:
   disable_all_panel_button(); // esto para evitar punchaderas mientras se procesa el cobro cashout
    // debo dsaber que con el refresh page se habilitan todos los botones, pero en caso de no haber conexion debo setear un timeout para reactival el panel button para intentar cashout nuevamente y asi no precibir un estado de maquina 'frizada' cuando se este offline por cualquier problema de conexion o demas. ok. Asi:
    setTimeout(function() {
             enable_all_panel_button();
      },10000); // si no hay conexion, pasado ese tiempo el panel button de reactiva para futuro intento de reconexion play o cashout ok.


   var volatil1 = convertir_hash_to_string_ted(); // esto solo para que recorra el panel de botones y revisar si hay jugadas preseleccionadas o no. ok ted. Esta funcion es la que modifica la variable de control: cantidad_de_jugadas_para_iniciar ok.

   if(cantidad_de_jugadas_para_iniciar > 0){
   // alert("klkkom");
   //hacer un delay de 0.5 seg para esperar sonido seleccion termine(otra funcion en el btn.click event ok) y hacer el refresh page:
     setTimeout(function() {
             window.location.reload(); 
      }, 500); 

     
   }else { 
       // si llega hasta aqui es porque el win_credit_display esta completo para el cashout ok: 
       //confirmar cobro:
       var validar_cobro = confirm("[Cashout/Cobrar]?");
       if (validar_cobro == true) { 

        //mandar un json comando cobrar que pone balance en cero alla y alla mismo actualizar last paid, total_out counter, etc... :
        // hacer cobro y sonido chash_out, SI HAY CONEXION SUCESSFULL:
         var xhttp = new XMLHttpRequest();
              xhttp.onreadystatechange = function() {
                if (this.readyState == 4 && this.status == 200) {
                 //si entra aqui es porque se recibio el pago alla ok:
                 //hacer sondio cobro monedas ok, y delay para refresh page new ronda ok.
                  document.getElementById('sound6').play(); // cobro win cash monedas

                  setTimeout(function() {
                    document.getElementById('sound6').play(); // cobro win cash monedas
                  }, 3000); // tiempo suficiente para sondio y cashout completo ok.
                  


                  setTimeout(function() {
                    window.location.reload(); 
                  }, 6000); // tiempo suficiente para sondio y cashout completo ok.
                 
                } // cierre del if readyState and status flags reader condition ok ted.

              };// cierre del onreadystatechange listener function definition ok.

              //hacer pedido dentro del mismo if condition para que el server no haga sorteros innecesarios. ok.
             // xhttp.open("GET", "/rondaruletats?jugadas=" + data_jugada , true);



              var jugador_id_credit_cashout =  document.getElementById("footer_info").innerHTML;
    
              var st_get_credit_cashout = "/rondaruletats?credit=cashout_creditj" + String(jugador_id_credit_cashout);

              xhttp.open("GET", st_get_credit_cashout , true);
              xhttp.send();


        //actualizar pagina para cargar cero balance y jugadas limpias panel ok ted.
        // listo, esperar que pongan creditos para jugar nuevamente. ok.
        } // cierre del confirm if condition.
       } // cierre del else condition

//activar el boton panel de nuevo, todo a la normalidad con el panel (si js llega alguna vez aqui porque el setimeout reload  lo reactiva pero ya con el refresh, por protocolo debemos habilitarlo explicitamente. ok ted.:
// enable_all_panel_button(); // ok 

} // fin de la funcion cobrar_cashout

 function fast_disable_this_btn(){
   // fast disable ok ted:
   document.getElementById('btn_prestart').disabled = true;

   //aprovechar y normalizar color jkpot si fuenron previos ganadores (flags):
   //negro:
   if(jp_blackwin == 'y'){
    document.getElementById("black_jackpot_display").style.backgroundColor = "black"; // normalizar color
   }

   //rojo:
   if(jp_redwin == 'y'){
    document.getElementById("red_jackpot_display").style.backgroundColor = "darkred"; // normalizar color
   }

   //si no hay sellecion de panel en el botton, entonces volver a habilitar
   //esto porque cuando se presiona sin ningun panel en el boton el user tiene que darle cancel para poder start again, queremos que se corrija eso; ok.
   var volatil2 = convertir_hash_to_string_ted(); // esto solo para que recorra el panel de botones y revisar si hay jugadas preseleccionadas o no. ok ted. Esta funcion es la que modifica la variable de control: cantidad_de_jugadas_para_iniciar ok.

   if(cantidad_de_jugadas_para_iniciar <= 0){
   // alert("klkkom");
   //hacer un delay de 0.5 seg para esperar sonido seleccion termine(otra funcion en el btn.click event ok) y hacer el refresh page:
     setTimeout(function() {
            document.getElementById('btn_prestart').disabled = false; // rehabilitar el boton prestart si hay jugadas para que el cliente pueda jugar la ronda sin CANCEL button ok. ted.
      }, 1000); // esto habilita el boton prestart e1 seg despues de haber revisado panel limpio sin jugadas. ok.
   }

 } // fin de la funcion fast_disable_this_btn

function sonido_animacion1(){
   
 //  if(cantidad_de_jugadas_para_iniciar > 0){
 //     cantidad_de_jugadas_para_iniciar = 0; //reseteo variable.
 //     document.getElementById('sound5').play(); // play winnwe sound
 //   }else{
 //     document.getElementById('sound3').play(); // play no cash to start sound
 //   }
 
   document.getElementById('sound8').play(); // CARGA ESPECIAL PARA IOS AKI OK.tadan.mp3
    
   document.getElementById('sound8').load(); // CARGA ESPECIAL PARA IOS AKI OK.tadan.mp3

   document.getElementById('sound5').play();
   
   //darle 4 segs para que no choque el audio effect:
    setTimeout(function() {
    //  document.getElementById('sound8').play(); // CARGA ESPECIAL PARA IOS AKI OK.tadan.mp3
    //  document.getElementById('sound8').load(); // CARGA ESPECIAL PARA IOS AKI OK.tadan.mp3
    }, 1000);
   
   //cargar solo una sola vez (refresh page) para no hacerlo en cada ronda:
   if(cargado < 2){
      cargado++; // incremento la variable indicando que ya se hizo ok.
     
     //CARGAR Y PARAR TODOS LOS SONIDOS IOS IPHONE TEST: (Se van a cargar cunado el user presione el touchscreen de la pantalla iphone button prestart click (manually user touch, not js) ok) ok ted.
    // 
     document.getElementById('sound2').play(); // ok ya trabaja comentado ok.
     document.getElementById('sound2').load(); // ok ya trabaja comentado ok.

     document.getElementById('sound3').play(); // probar sin credito
     document.getElementById('sound3').load(); // probar sin credito

     document.getElementById('sound4').play(); // sonido seleccion ya funciona, comentado ok.
     document.getElementById('sound4').load(); // sonido seleccion ya funciona, comentado ok.

    // document.getElementById('sound5').play(); // ya funciona ok, winner spin ok, no hay que hacer cound reload,ok.
    // document.getElementById('sound5').load(); // ya funciona ok, winner spin ok, no hay que hacer cound reload,ok.

     document.getElementById('sound6').play(); //cobro credit reload audio ok.
     document.getElementById('sound6').load(); //cobro credit reload audio ok.

     document.getElementById('sound7').play(); // transfered win credi to credit audio, reload it ok.
     document.getElementById('sound7').load(); // transfered win credi to credit audio, reload it ok.
     
     document.getElementById('sound8').play(); // tadan sound play to load ok.
     document.getElementById('sound8').load(); // tadan sound play to load ok.


    }


//  sonido_animacionalpha();

}


function sonido_animacion_loaders(){
   
 if(cargado < 3){
      cargado++; // incremento la variable indicando que ya se hizo ok.
     
     //CARGAR Y PARAR TODOS LOS SONIDOS IOS IPHONE TEST: (Se van a cargar cunado el user presione el touchscreen de la pantalla iphone button prestart click (manually user touch, not js) ok) ok ted.
    // 
     document.getElementById('sound2').play(); // ok ya trabaja comentado ok.
     document.getElementById('sound2').load(); // ok ya trabaja comentado ok.

     document.getElementById('sound3').play(); // probar sin credito
     document.getElementById('sound3').load(); // probar sin credito

     document.getElementById('sound4').play(); // sonido seleccion ya funciona, comentado ok.
     document.getElementById('sound4').load(); // sonido seleccion ya funciona, comentado ok.

    // document.getElementById('sound5').play(); // ya funciona ok, winner spin ok, no hay que hacer cound reload,ok.
    // document.getElementById('sound5').load(); // ya funciona ok, winner spin ok, no hay que hacer cound reload,ok.

     document.getElementById('sound6').play(); //cobro credit reload audio ok.
     document.getElementById('sound6').load(); //cobro credit reload audio ok.

     document.getElementById('sound7').play(); // transfered win credi to credit audio, reload it ok.
     document.getElementById('sound7').load(); // transfered win credi to credit audio, reload it ok.
  }

}



function sonido_animacionalpha(){
   
 //  if(cantidad_de_jugadas_para_iniciar > 0){
 //     cantidad_de_jugadas_para_iniciar = 0; //reseteo variable.
 //     document.getElementById('sound5').play(); // play winnwe sound
 //   }else{
 //     document.getElementById('sound3').play(); // play no cash to start sound
 //   }
   document.getElementById('sound2').play(); 
}

function timer_jackpot_refresh_and_animation() {
  // refreshcar el jackpot cada 15min inactivos y el animation cada 25min de inactividad acompanado de un refresh page ok(limpiar panel old jugadas ocultas luego de la animacion ok. ted., la unidad de medida del timepo de chaqueo sera de 5min ok.
  


   setInterval(function() {
    mq_sola_minutosx5++;
    contador_animacion++;

    if( (contador_animacion > 5) && (spin_casi_rotando == false) ){
      contador_animacion = 0; // reseteo contador
     // alert("hay que hacer animation");
      hacer_animacion();
    }

     if( (mq_sola_minutosx5 > 3) && (spin_casi_rotando == false) ){
      mq_sola_minutosx5 = 0; // reseteo contador
     // alert("hay que refrescar credit y jkpt");
      refresh_credit(); // esta funcion actualiza el jackpot y los creditos listo ok. Tambien se llama on page load, onload. ok.
    }

                
   }, 300000); // cada 5min = 1x60x5x1000 = 300,000 segs periodico.


}

function hacer_animacion() {
  // funcion visual de animacion de botones
  //document.getElementById('sound5').play(); // no escandalo periodico ok.
  disable_all_panel_button();
  botones_todos_rojo();
  botones_animacion_amarillo();
  //refresh page porque se quedan jugadas en la memoria del array bnt seleccion js, mejor reload. (hay botones rojos to play ocultos en amarillo (animacion), mejor limpiar con refresh after animacion end ok.)
 
 // ronda_spin_animation1(); en el utimo grupo klk

 // enable_all_panel_button();
 // window.location.reload(); en el utimo grupo klk


}

function botones_todos_rojo() {
  //arreglo de nombre de los botones
  var array_btn_panel = ["btn_0_1","btn_0_2","btn_0_3","btn_0_4","btn_1_1","btn_1_2","btn_1_3","btn_1_4","btn_2_1","btn_2_2","btn_2_3","btn_2_4","btn_3_1","btn_3_2","btn_3_3","btn_3_4","btn_4_1","btn_4_2","btn_4_3","btn_4_4","btn_5_1","btn_5_2","btn_5_3","btn_5_4","btn_6_1","btn_6_2","btn_6_3","btn_6_4","btn_7_1","btn_7_2","btn_7_3","btn_7_4","btn_8_1","btn_8_2","btn_8_3","btn_8_4","btn_9_1","btn_9_2","btn_9_3","btn_9_4","btn_10_1","btn_10_2","btn_10_3","btn_10_4","btn_11_1","btn_11_2","btn_11_3","btn_11_4","btn_12_1","btn_12_2","btn_12_3","btn_12_4"]

                         

  for(var i = 0; i < array_btn_panel.length; i++){ 
               var btn_name = array_btn_panel[i];
              //  btn_azul = 'btn_0_1';
               document.getElementById(btn_name).style.backgroundColor = "red";        
              // document.getElementById('btn_0_1').style.backgroundColor = "red";
           }
 
} // fin de la funcion botones_todos_rojo()

function botones_animacion_amarillo() {
  //arreglo de nombre de los botones
  var array_btn_panel = ["btn_5_2","btn_5_1","btn_5_3","btn_5_4","btn_6_3","btn_6_1","btn_3_3","btn_2_4","btn_2_3","btn_1_4","btn_4_2","btn_4_4","btn_7_2","btn_8_1","btn_8_2","btn_9_1","btn_9_2","btn_6_4","btn_6_2","btn_3_4","btn_3_2","btn_3_1","btn_2_2","btn_2_1","btn_1_2","btn_1_1","btn_1_3","btn_4_1","btn_4_3","btn_7_1","btn_7_3","btn_7_4","btn_8_3","btn_8_4","btn_9_3","btn_9_4","btn_12_2","btn_12_1","btn_11_2","btn_11_1","btn_10_2","btn_10_1","btn_10_3","btn_10_4","btn_11_3","btn_11_4","btn_12_3","btn_12_4","btn_0_2","btn_0_3","btn_0_1","btn_0_4"]

                         

  for(let i = 0; i < array_btn_panel.length; i++){ 
               let btn_name = array_btn_panel[i];  // let nos permite que la variable de js cambie siempre de valor en el loop, sino no funciona este codigo ok. ted. link https://stackoverflow.com/questions/5226285/settimeout-in-for-loop-does-not-print-consecutive-values

              
              setTimeout(function() {
                document.getElementById(btn_name).style.backgroundColor = "yellow";
                //habilitar botones de juego pero en el ultimo botno de la animacion, o sea cuando la animacion termine ok:
                if ( i == array_btn_panel.length-1) {
                  enable_all_panel_button();
                  ronda_spin_animation1(); // prender luces, however page will refresh ok ted animation.

                  setTimeout(function() {
                   window.location.reload();
                  },1000);

                }

              },150 * parseInt(i));


                       
           }
 
} // fin de la funcion botones_animacion_amarillo()



//funcion para refrescar el credito de la mq onload refresh ok.
function refresh_credit(){
 // alert('klk');
 var xhttp2 = new XMLHttpRequest();
  xhttp2.onreadystatechange = function() {
    if (this.readyState == 4 && this.status == 200) {
     
      document.getElementById('credit_display').innerHTML = this.responseText.split('-')[0]; // "0000" String por favor ok.

      //aprovecho y refresh jackpots tambien aqui mismo, en esta misma funcion de request - ok. ted:
      document.getElementById("black_jackpot_display").innerHTML  =  this.responseText.split('-')[1];
      document.getElementById("red_jackpot_display").innerHTML    =  this.responseText.split('-')[2].split('}')[0]; // nota estaba sin el segundo split, pero hay un maco con el 100} so tuve que filtrarlo asi provisional ok. en la vista del jackpot rojo esta saliendo el caracterl del protocolo. Ok. ted.
    }
  };


  var jugador_id_credit =  document.getElementById("footer_info").innerHTML;
  
  var st_get_credit = "/rondaruletats?credit=get_creditj" + String(jugador_id_credit);
 // alert(st_get_credit);

  xhttp2.open("GET", st_get_credit, true);  // request get_credit balance.

  xhttp2.send();
    
} // fin de la funcion refresh_credit() ok.

//Codigo js libre ok:

var server_win_position = -1; // esto para no ganador provisional ok.
var server_win_display = 0; // esto para no ganador provisional ok.
var server_credit_display = 0; // esto para no ganador provisional ok.
var string_btn_resaltar_gandarores = ""; // como String inicialmente.
var array_btn_resaltar_gandarores = []; //  Esto con el split se convierte en array y lo almaceno aqui para el for recorrido de resaltar cada boton ganador ok.
var jp_negro_display = "000"; // inicializar variable
var jp_rojo_display  = "000"; // inicializar variable
var jp_blackwin = 'none'; // inicializar variables con valor especifico.
var jp_redwin =  'none'; // inicializar variables con valor especifico.

var spin_casi_rotando = false;

var mq_sola_minutosx5 = 0;  //contador de tiempo de maquina sola de c/5 minutos. ok. (para animaciones y demas)
var contador_animacion = 0; // contador para contar el tiempo inactivo para empezar la animacion.

//funcion get_credit_periodically revisa si enviaron creditos inicio a la mq
//si llego credito (new credit? server rails flag no se from caja), desactivar fast prestart, sonino new credit, refresh page.

//function function_name(argument) {
  // Solo si el panel esta en amarillo, sin jugadas va a revisar periodicamente. ok.si hay jugadas con el server spin update se va a act solo.
   setInterval(function(){ 
      var xhttp3 = new XMLHttpRequest();
      xhttp3.onreadystatechange = function() {
      if (this.readyState == 4 && this.status == 200) {
       
        if( (this.responseText == 'reload_new_credit') && (spin_casi_rotando == false) ) {
            //desactivo el prestart button para que no coincia inicio de rotacion mientras hago el play sound y el reload. ok.
            fast_disable_this_btn();
            //sonar musica de acreditacion y refrescar pagina para que cargue el credito automaticamente.
            document.getElementById('sound7').play(); // ok sound7 play cuando reciba credito.
            //pequeno delay en el reload para esperar que termine el sonido de arriba ok, 1.5segs aprox.
             setTimeout(function() {
               window.location.reload(); // refresh page
            }, 1500); 
                     
          }      
        }

      }; 
          var jugador =  document.getElementById("footer_info").innerHTML;
          var st_ask_new_credit = "/rondaruletats?credit=ask_new_creditj" + String(jugador);
          // alert(st_ask_new_credit);

          // probar lo del header logout:
          //oHttp.setRequestHeader "Authorization","Basic " 
          ///setRequestHeader('Authorization', 'nope'); 
          //xhttp3.setRequestHeader('Authorization', 'nope'); 
          //, "no user", "no password");
          xhttp3.open("GET", st_ask_new_credit , true); // request get_credit balance.
          //hacer el reload

          xhttp3.send();

   }, 10000); // fin de la funcion setinterval que refresca el credit ok cada 10 segs mejor. en vez de 5 too much querys later many users ok.




function funcion_ajax(){

  spin_casi_rotando = true; // activo el flag para evitar que el credit reload the page porque casi empieza una spin ronda just started by the user. Esto es un flag de control para evitar coincidencias de tiempos, no se actualiza credito enviado del pos hasta que la ronda termine para evitar el page refresh durante el spin round. ok ted.

  //Convertir el hash y al mismo timepo Revisar que hayan jugadas seleccionas en el panel (por ende balance) para hacer la ronda:
  
  var data_jugada = convertir_hash_to_string_ted(); //no mover de aqui esta logica esta por orden.
  
    if(cantidad_de_jugadas_para_iniciar > 0){

        cantidad_de_jugadas_para_iniciar = 0; //reseteo variable.
        // document.getElementById("btn_start").click();
        //enviar un request con los siguientes parametros:
        //las jugadas
        //devuelve: EL Winner number, el credit y el win, ademas de jkpot amount y winner? later...

        // server side: VERIFICAR QUE LAS JUGADAS NO SOBREPASEN EL MONTO DEL CREDIT.
        var xhttp = new XMLHttpRequest();
        xhttp.onreadystatechange = function() {
          if (this.readyState == 4 && this.status == 200) {
           // document.getElementById("demo").innerHTML =
           // this.responseText;
           //Verificar repuesta del server si el user tiene credito para jugar esta ronda antes de hacer la ronda aki ok.:
           //Debug: ok.
          // if (this.responseText == "notienecreditosparajugar") {
          //  alert(" notienecreditosparajugar  ");
          // }

           var info_recibida = String(this.responseText);
              //  alert(info_recibida);
           if ((info_recibida !== "notienecreditosparajugar") && (info_recibida !== "nopuedejugarnologgeado")) {
                // Hace la ronda si el server no manda que ya no hay creditos disponible to plya for this user. ok
                server_win_position = this.responseText.split('-')[0];
                server_win_display  = this.responseText.split('-')[1];
                server_credit_display   = this.responseText.split('-')[2];
                string_btn_resaltar_gandarores = this.responseText.split('-')[3]; // sale string aqui ok.
                total_apostado_recibido = this.responseText.split('-')[4];

                jp_negro_display = this.responseText.split('-')[5];
                jp_rojo_display  = this.responseText.split('-')[6];
                jp_blackwin = this.responseText.split('-')[7];
                jp_redwin = this.responseText.split('-')[8];       
                // esto de abajo esa en nueva funcion llamada actualizar_valores()
                // document.getElementById("win_display").innerHTML    =  server_win_display;
                // document.getElementById("credit_display").innerHTML =  server_credit_display;
                 document.getElementById("btn_start").click();
                 document.getElementById('sound2').play(); // el error era inicializarlo con play/load ok.solved.
            }else{
              //Si no hay credito, reload page para que los display se actualicen de una vez en uno, dos o mas dispositivos loogeados con el mismo usuario, refresh al momento de intentar jugar sin credit, para refresh screens ok.
              window.location.reload();
            }

          }else{
              //Si no hay respuesta del ajax readyState ok, entonces mostar un mensaje de offline - check conection.
              //Status 404 means page not found
            //  alert("ready state:" + this.readyState);
            //  alert("status: " + this.status);

              if (this.readyState == 4 && this.status == 0) {
                 alert("X Offline. Please check connection.");
              }
           } // cierre del ultimo else condition ok.

        };// cierre del onreadystatechange listener function definition ok.

        //hacer pedido dentro del mismo if condition para que el server no haga sorteros innecesarios. ok.
        var jugador_ronda =   document.getElementById("footer_info").innerHTML;
        var url_ajax_ronda =  "/rondaruletats?jugadas=" + data_jugada + "..."  + "j" + String(jugador_ronda);

        //"###" va a ser para el split en el controller, separar jugador de la ronda ok.

        xhttp.open("GET", url_ajax_ronda  , true);
        xhttp.send();

    } //; cierre del if(cantidad_de_jugadas_para_iniciar > 0) condition ok 
  
  //xhttp.open("GET", "/rondaruletats?jugadas=" + String(hash_bnt_status['btn_0_1']) , true);
  
 // xhttp.open("GET", "/rondaruletats?jugadas=" + data_jugada , true);
  //hash_bnt_status['btn_0_1'])

  //xhttp.open("GET", "/rondaruletats?jugadas=" + String(hash_bnt_status['btn_0_1']) + String(hash_bnt_status['btn_0_2']) , true);


 // xhttp.send();


} // fin de la funcion llamada funcion_ajax()


function actualizar_valores(){
  // esto de abajo esa en nueva funcion llamada actualizar_valores()
    setTimeout(function() {
          if(server_win_display > 0){
             document.getElementById('sound6').play(); // cobro win cash monedas
         // document.getElementById("win_display").innerHTML    =  jdas; // debug jugadas solved ok
            array_btn_resaltar_gandarores = string_btn_resaltar_gandarores.split('k'); // split
            //array_btn_resaltar_gandarores = array_btn_resaltar_gandarores.pop();
            //document.getElementById("btn_cancel").innerHTML = String(array_btn_resaltar_gandarores);

// el -1 del for es porque hay una coma al final con el split, sino document.getEl.. en ',' va a dar error ok ted ok.
          for(var i = 0; i < array_btn_resaltar_gandarores.length - 1; i++){ 
               var btn_azul = array_btn_resaltar_gandarores[i];
              //  btn_azul = 'btn_0_1';
               document.getElementById(btn_azul).style.backgroundColor = "blue";        
              // document.getElementById('btn_0_1').style.backgroundColor = "red";
           }

          //verificar si es ganador para resaltarlo.
          //verificar jackpot negro ganador:
          if(jp_blackwin == 'y'){
            document.getElementById("black_jackpot_display").style.backgroundColor = "blue";

             setTimeout(function() {
                document.getElementById('sound8').play(); //tadan sound ok.
               // document.getElementById('sound5').play(); 

             },5);
             setTimeout(function() {
                document.getElementById('sound8').play(); //tadan sound ok.        
             },4000);

          }

          //verificar jackpot rojo ganador:
          if(jp_redwin == 'y'){
            document.getElementById("red_jackpot_display").style.backgroundColor = "blue";

             setTimeout(function() {
                document.getElementById('sound8').play(); // old 5 en 4k tadan sound ok.
               // document.getElementById('sound5').play(); 

             },5);
             setTimeout(function() {
             // alert("win red");
                document.getElementById('sound8').play(); //old 6 en 6ktadan sound ok.        
             },4000);

          }

          
          document.getElementById("win_display").innerHTML    =  server_win_display;
           //resaltar jugadas ganadoras:
           //document.getElementById("win_display").innerHTML    =  jdas; // 
           string_btn_resaltar_gandarores = ""; // Limpio la variable ok.

          }     
    }, 1000); 

    setTimeout(function() {
       // if(server_win_display > 0){
         if(true){
               document.getElementById("win_display").innerHTML    =  "0000";
               if ( (server_credit_display - total_apostado_recibido ) >= 0) {
                 //document.getElementById("credit_display").innerHTML = server_credit_display;
                 mostrar_credit_display(server_credit_display); 
                 if(server_win_display > 0){ 
                    document.getElementById('sound7').play(); // sonido cobro (suena solo si es ganador con el if clause ok)
                    quitar_azul();
                  }
                 //descontar las jugadas preseleccionadas de la proxima ronda posible:
                 setTimeout(function() {
                 //  document.getElementById("credit_display").innerHTML = (server_credit_display - total_apostado_recibido);
                 // if negativo no mopstrar pero y el descuento final? probar con 30+30
                 if( (server_credit_display - total_apostado_recibido) >= 0) {

  
                     mostrar_credit_display(server_credit_display - total_apostado_recibido); 
                  }// esto para evitar balance negativo en en credit display del js, no afecta balance de rails server.
                     document.getElementById('sound4').play(); // sonido seleccion
                   }, 2000);

               }
               if ( (server_credit_display - total_apostado_recibido ) < 0) {
                //document.getElementById("credit_display").innerHTML = server_credit_display;
                mostrar_credit_display(server_credit_display);
                if(server_win_display > 0){ 
                    document.getElementById('sound7').play(); // sonido cobro (suena solo si es ganador con el if clause ok)
                     quitar_azul();
                  } 
                //document.getElementById('sound7').play(); // sonido cobro 
                window.location.reload();
               }

               if(server_win_display > 0){ 
                    document.getElementById('sound7').play(); // sonido cobro (suena solo si es ganador con el if clause ok)
                     quitar_azul();
                  }
              // document.getElementById('sound7').play(); // sonido cobro 
            } 
            enable_all_panel_button(); // Habilitar botoner panel de juego nuevamente.   
    }, 5000);      

}


function quitar_azul(){
  // body...
   for(var i = 0; i < array_btn_resaltar_gandarores.length - 1; i++){ 
               var btn_azul = array_btn_resaltar_gandarores[i];
              //  btn_azul = 'btn_0_1';
               document.getElementById(btn_azul).style.backgroundColor = "red";        
              // document.getElementById('btn_0_1').style.backgroundColor = "red";
           }

           return;
}


function parar_spin_y_sonido_ganador(){ 
         document.getElementById('sound2').load(); // parar sonido
         document.getElementById('sound4').play(); // play selected(argument) 
         document.getElementById('sound5').play(); // play winnwe sound
         spin_casi_rotando = false; //flag de control, false indicando que acaba de pararse. ok este flag es para saber cuando actualizar reload si hay que recibir el credit desde el pos. ok. 
         //aprovecho y muestro los jackpots display desde que termina la ronda del spin ok:
         document.getElementById("black_jackpot_display").innerHTML  =  jp_negro_display;
         document.getElementById("red_jackpot_display").innerHTML    =  jp_rojo_display;


}
  

  function refresh_con_delay(){
    //desabilitar el boton START para que no intenten jugar hasta el reload:
    document.getElementById('btn_start').disabled = true;
    // el delay es para esperar 1 seg que termine el mp3 de la funcion sonarbtn al presional CANCEL button ok ted.
    setTimeout(function() {
        //your code to be executed after x seconds
         window.location.reload(); // refresh page and cancel all ruleta plays. ok ted. 
      }, 1000);  
    

  }


  function logout_basic() {
    //Hacer logout basic con click boton logout_basic ok:
      var xhttp44 = new XMLHttpRequest();
    
    //  window.alert(document.cookie.split(';').join(';\r\n'));
     // var x = document.cookie; 
    //  window.alert(x);
     //  window.alert(document.cookie.split(';').join(';\r\n'));
     // var x = document.cookie; 
    //  window.alert(x);
     
     // var req = new XMLHttpRequest();
     // req.open('GET', document.location, false);
     // req.send(null);
     // var headers = req.getAllResponseHeaders().toLowerCase();
     // alert(headers);


      xhttp44.onreadystatechange = function() {
         if (this.readyState == 4 ){
           // document.write("X-Ok. Bye. Please Login again to Play. ");
           // window.location.reload(); // logout y refresh page va a requerir login nuevamente ok.
           alert(" Bye!");
          // window.location.replace("https://www.google.com");
           window.location.reload();
            //puede ser un window close tbn. ? o reopen pide login?
            //window.close('','_parent','');
           // window.open('','_self').close();
           // window.open('','_parent',''); 

           }
      }; 

      var jugador = 'x'; // esto solo para indicar el logout en el server controller ok. document.getElementById("footer_info").innerHTML; 
      var st_ask_new_credit = "/rondaruletats?credit=ask_new_creditj" + String(jugador);
      // alert(st_ask_new_credit);

      // probar lo del header logout:
      //oHttp.setRequestHeader "Authorization","Basic " 
      ///setRequestHeader('Authorization', 'nope'); 
      //xhttp44.setRequestHeader('Authorization', 'nope'); 
      //, "no user", "no password");
     // xhttp44.open("GET", st_ask_new_credit , true, "no user", "no password"); // request con otro user y pwd basic va a mofdificar los originales del header que haran un login request on next page refresh ok ted.
      xhttp44.open("GET", st_ask_new_credit , true); // ok funciona ok sin esto: no ponerlo ok: , "no user", "no password"
  
      xhttp44.send();

  } // fin de la  funcion logout_basic() ok.



  //Autoplay nos permite realizar jugadas automaticas periodicamente:
  function autoplay() {
      if (flag_autoplay == true) {

        window.location.reload(); // reload page to disable autoplay mode ok.

      } else {
        flag_autoplay = true; // activo flag y pongo la ruleta en modo autoplay cada x segs.
        document.getElementById('sound5').play();  // hacer el play de este sonido con este boton (win_display click) para poderlo cargar. Solo aplica para IOS ok.
        document.getElementById("btn_prestart").style.backgroundColor = "lightgreen";
        document.getElementById("btn_prestart").innerHTML = "<b> [AUTO]";
        
        //sonar musica de aviso en 20 segs
        // Esto de abajo no necesario ara IOS: ok.
     //   setTimeout(function() {
     //     document.getElementById('sound5').play();          
     //   }, 2000); // 3 segs unica vez

        //hacer click prestart_btn to autoplay en 25 segs:
        setTimeout(function() {
          //verificar que hayan jugadas seleecionadas justo antes del autoplay la primera vez.
          var data_jugada_c = convertir_hash_to_string_ted(); //

                if (cantidad_de_jugadas_para_iniciar > 0) {
                  cantidad_de_jugadas_para_iniciar = 0; //reseteo variable.
                  document.getElementById("btn_prestart").click();
                   autoplay_counter_round++; // incremento el contador porque la primera vez cuenta en el automatico, asi en el ciclo sigue contando y se considera en la suma esta primera vez del autoplay ok. ted. 

                } else {

                  window.location.reload();
                  
                }  

         //   setInterval(function() {
        //      document.getElementById('sound5').play();          
         //   }, 20000); // 20 segs periodico.

            setInterval(function() {
                // verificar si no hay nada apostado justo antes del autoplay, refresh page to disable ok: 
                //verificar que hayan jugadas en panel:
                var data_jugada_b = convertir_hash_to_string_ted(); //

                if ((cantidad_de_jugadas_para_iniciar > 0) && (autoplay_counter_round < 100) ) {
                  cantidad_de_jugadas_para_iniciar = 0; //reseteo variable.
                  autoplay_counter_round++; // incremento contador de rondas autoplay ok.
                  document.getElementById("btn_prestart").click(); 
                  //poner el cancel en rojo por 20 seg de la ronda spin (auto disbale obvious ok)
                  document.getElementById("btn_cancel").style.backgroundColor = "darkred";

                  //volverlo a poner en amarillo 5 segs antes del autoplay:
                  setTimeout(function() {
                    document.getElementById("btn_cancel").style.backgroundColor = "yellow";         
                  }, 20000); // 20 segs unica vez, pero dento de un setinterval periodico ok

                } else {

                  window.location.reload();

                }
                
             }, 23000); // 23 segs periodico.


         }, 6000); // 6 segs unica vez




      } // fin del else condition

    //alert("automode");
  

  } //fin de la funcion autoplay()




  function disable_all_panel_button(){
    //desabilitar todos los botones del panel frontal:

    
   document.getElementById('logout_basic').disabled = true;

   document.getElementById('win_display').disabled = true;
   document.getElementById('credit_display').disabled = true;

   document.getElementById('btn_cancel').disabled = true;
   //este boton especial se debe poner en rojo disabled ok:
   document.getElementById("btn_cancel").style.backgroundColor = "darkred";

   document.getElementById('btn_prestart').disabled = true;

   document.getElementById('black_jackpot_display').disabled = true;
   document.getElementById('red_jackpot_display').disabled = true;

   document.getElementById('btn_0_1').disabled = true;
   document.getElementById('btn_0_2').disabled = true;
   document.getElementById('btn_0_3').disabled = true;
   document.getElementById('btn_0_4').disabled = true;

   document.getElementById('btn_1_1').disabled = true;
   document.getElementById('btn_1_2').disabled = true;
   document.getElementById('btn_1_3').disabled = true;
   document.getElementById('btn_1_4').disabled = true;

   document.getElementById('btn_2_1').disabled = true;
   document.getElementById('btn_2_2').disabled = true;
   document.getElementById('btn_2_3').disabled = true;
   document.getElementById('btn_2_4').disabled = true;

   document.getElementById('btn_3_1').disabled = true;
   document.getElementById('btn_3_2').disabled = true;
   document.getElementById('btn_3_3').disabled = true;
   document.getElementById('btn_3_4').disabled = true;

   document.getElementById('btn_4_1').disabled = true;
   document.getElementById('btn_4_2').disabled = true;
   document.getElementById('btn_4_3').disabled = true;
   document.getElementById('btn_4_4').disabled = true;

   document.getElementById('btn_5_1').disabled = true;
   document.getElementById('btn_5_2').disabled = true;
   document.getElementById('btn_5_3').disabled = true;
   document.getElementById('btn_5_4').disabled = true;

   document.getElementById('btn_6_1').disabled = true;
   document.getElementById('btn_6_2').disabled = true;
   document.getElementById('btn_6_3').disabled = true;
   document.getElementById('btn_6_4').disabled = true;

   document.getElementById('btn_7_1').disabled = true;
   document.getElementById('btn_7_2').disabled = true;
   document.getElementById('btn_7_3').disabled = true;
   document.getElementById('btn_7_4').disabled = true;

   document.getElementById('btn_8_1').disabled = true;
   document.getElementById('btn_8_2').disabled = true;
   document.getElementById('btn_8_3').disabled = true;
   document.getElementById('btn_8_4').disabled = true;

   document.getElementById('btn_9_1').disabled = true;
   document.getElementById('btn_9_2').disabled = true;
   document.getElementById('btn_9_3').disabled = true;
   document.getElementById('btn_9_4').disabled = true;

   document.getElementById('btn_10_1').disabled = true;
   document.getElementById('btn_10_2').disabled = true;
   document.getElementById('btn_10_3').disabled = true;
   document.getElementById('btn_10_4').disabled = true;

   document.getElementById('btn_11_1').disabled = true;
   document.getElementById('btn_11_2').disabled = true;
   document.getElementById('btn_11_3').disabled = true;
   document.getElementById('btn_11_4').disabled = true;

   document.getElementById('btn_12_1').disabled = true;
   document.getElementById('btn_12_2').disabled = true;
   document.getElementById('btn_12_3').disabled = true;
   document.getElementById('btn_12_4').disabled = true;

  }
  


  function enable_all_panel_button(){
    
   //Habilitar todos los botones del panel frontal:
   document.getElementById('logout_basic').disabled   = false;

   document.getElementById('win_display').disabled    = false;
   document.getElementById('credit_display').disabled = false;

   document.getElementById('btn_cancel').disabled   = false;
   //Este boton cancel se debe poner yellow con enabled ok.
   document.getElementById("btn_cancel").style.backgroundColor = "yellow";

   document.getElementById('btn_prestart').disabled = false;

   document.getElementById('btn_0_1').disabled = false;
   document.getElementById('btn_0_2').disabled = false;
   document.getElementById('btn_0_3').disabled = false;
   document.getElementById('btn_0_4').disabled = false;

   document.getElementById('btn_1_1').disabled = false;
   document.getElementById('btn_1_2').disabled = false;
   document.getElementById('btn_1_3').disabled = false;
   document.getElementById('btn_1_4').disabled = false;

   document.getElementById('btn_2_1').disabled = false;
   document.getElementById('btn_2_2').disabled = false;
   document.getElementById('btn_2_3').disabled = false;
   document.getElementById('btn_2_4').disabled = false;

   document.getElementById('btn_3_1').disabled = false;
   document.getElementById('btn_3_2').disabled = false;
   document.getElementById('btn_3_3').disabled = false;
   document.getElementById('btn_3_4').disabled = false;

   document.getElementById('btn_4_1').disabled = false;
   document.getElementById('btn_4_2').disabled = false;
   document.getElementById('btn_4_3').disabled = false;
   document.getElementById('btn_4_4').disabled = false;

   document.getElementById('btn_5_1').disabled = false;
   document.getElementById('btn_5_2').disabled = false;
   document.getElementById('btn_5_3').disabled = false;
   document.getElementById('btn_5_4').disabled = false;

   document.getElementById('btn_6_1').disabled = false;
   document.getElementById('btn_6_2').disabled = false;
   document.getElementById('btn_6_3').disabled = false;
   document.getElementById('btn_6_4').disabled = false;

   document.getElementById('btn_7_1').disabled = false;
   document.getElementById('btn_7_2').disabled = false;
   document.getElementById('btn_7_3').disabled = false;
   document.getElementById('btn_7_4').disabled = false;

   document.getElementById('btn_8_1').disabled = false;
   document.getElementById('btn_8_2').disabled = false;
   document.getElementById('btn_8_3').disabled = false;
   document.getElementById('btn_8_4').disabled = false;

   document.getElementById('btn_9_1').disabled = false;
   document.getElementById('btn_9_2').disabled = false;
   document.getElementById('btn_9_3').disabled = false;
   document.getElementById('btn_9_4').disabled = false;

   document.getElementById('btn_10_1').disabled = false;
   document.getElementById('btn_10_2').disabled = false;
   document.getElementById('btn_10_3').disabled = false;
   document.getElementById('btn_10_4').disabled = false;

   document.getElementById('btn_11_1').disabled = false;
   document.getElementById('btn_11_2').disabled = false;
   document.getElementById('btn_11_3').disabled = false;
   document.getElementById('btn_11_4').disabled = false;

   document.getElementById('btn_12_1').disabled = false;
   document.getElementById('btn_12_2').disabled = false;
   document.getElementById('btn_12_3').disabled = false;
   document.getElementById('btn_12_4').disabled = false;

  }


  function ronda_spin_animation1(){
    //document.getElementById('sound4').play();
    document.getElementById("spin_0").style.visibility = "visible"; 
    document.getElementById("spin_5").style.visibility = "visible"; 
    document.getElementById("spin_12").style.visibility = "visible"; 
    document.getElementById("spin_3").style.visibility = "visible"; 
    document.getElementById("spin_10").style.visibility = "visible"; 
    document.getElementById("spin_1").style.visibility = "visible"; 
    document.getElementById("spin_8").style.visibility = "visible"; 
    document.getElementById("spin_9").style.visibility = "visible"; 
    document.getElementById("spin_2").style.visibility = "visible"; 
    document.getElementById("spin_7").style.visibility = "visible"; 
    document.getElementById("spin_6").style.visibility = "visible"; 
    document.getElementById("spin_11").style.visibility = "visible"; 
    document.getElementById("spin_4").style.visibility = "visible"; 

  }
// funcion que apaga todos los leds de la ruleta ok. hiiden. ok.
  function ronda_spin_animation1_off(){
    valor = 11;
    //document.getElementById('sound4').play();
    document.getElementById("spin_0").style.visibility =  "hidden"; 
    document.getElementById("spin_5").style.visibility =  "hidden"; 
    document.getElementById("spin_12").style.visibility = "hidden"; 
    document.getElementById("spin_3").style.visibility =  "hidden"; 
    document.getElementById("spin_10").style.visibility = "hidden"; 
    document.getElementById("spin_1").style.visibility =  "hidden"; 
    document.getElementById("spin_8").style.visibility =  "hidden"; 
    document.getElementById("spin_9").style.visibility =  "hidden"; 
    document.getElementById("spin_2").style.visibility =  "hidden"; 
    document.getElementById("spin_7").style.visibility =  "hidden"; 
    document.getElementById("spin_6").style.visibility =  "hidden"; 
    document.getElementById("spin_11").style.visibility = "hidden"; 
    document.getElementById("spin_4").style.visibility =  "hidden"; 


  }

  
  // Esta funcion conveirte el hash de botones de jugadas en string para ser enviado al controlador.
  function  convertir_hash_to_string_ted(){
      
     var a = hash_bnt_status; // copio el hash
     var  resultado = "";
      for (var key in a) {
          resultado = resultado + String(key) + ">"; // seprarador especial ted >, : no permitido.
          resultado = resultado + String(a[key]) + " "; // no se puede enviar separado con : ni - poque el framework corta el string y solo llega btn_0_1:y como primer parmam ok. ted.
          //Verificar si hay jugadas 'y' para activar flag de ruleta spin round start ok ted.
          if(a[key] == 'y'){
            cantidad_de_jugadas_para_iniciar ++; // incremento la variable de control. ok.
          }

      }
   // document.getElementById("btn_cancel").innerHTML =  resultado; //debug only solved ok.

     return resultado;

  } // fin de la funcion String convertir_hash_to_string_ted()



  function toggle_selection(id_btn) {

    if ( document.getElementById(id_btn).style.backgroundColor == "red" ) // estaba rojo
      {
        document.getElementById(id_btn).style.backgroundColor = "yellow";
        //sacar_btn_de_la_ronda(id_btn);
        hash_bnt_status[id_btn]='n'; //sacar_btn_de_la_ronda
        
        // retornar el credito del jugador:
        balance = parseInt(document.getElementById('credit_display').innerHTML); // capturar valor 
        moneda_apostada = id_btn[id_btn.length-1] // ej: btn_0_1 => 1 moneda
  //document.getElementById('credit_display').innerHTML = (balance + parseInt(moneda_apostada));
        var enviar1 = balance + parseInt(moneda_apostada);
        mostrar_credit_display(enviar1);
        //alert debug msj:
       // alert(hash_bnt_status[id_btn]);

      }else{
       
        //si hay balance, adicionar_btn_en_la_ronda(id_btn);
        balance = parseInt(document.getElementById('credit_display').innerHTML); // capturar valor string del credito y hacer un casting a intenger para descontar apuesta. ok. ted.
        moneda_apostada = id_btn[id_btn.length-1] // ej: btn_0_1 => 1 moneda
        if( (balance - moneda_apostada) >= 0 ) 
          { 
            //adicionar_btn_en_la_ronda(id_btn);

            //cambiar status color boton seleccionado para apuesta.
            document.getElementById(id_btn).style.backgroundColor = "red";
           // document.getElementById('credit_display').value = (balance - moneda_apostada);
           // document.getElementById('credit_display').innerHTML = (balance - moneda_apostada);
            mostrar_credit_display(balance - moneda_apostada);

            hash_bnt_status[id_btn]='y'; // asigno 'y' como seleecionado par ael sortreo. ok.

             //alert debug msj:
            //alert(hash_bnt_status[id_btn]);
          }else{
             document.getElementById('sound3').play();
             hash_bnt_status[id_btn]='n'; //sacar_btn_de_la_ronda, me aseguro. No tiene cred. suficiente ok. ted. 
             //En resumen, esta parte del else deja el boton en amarillo, suena no credit y saca le pone 'n' a la seleccion del hash ok ted.
          }

       // alert(moneda_apostada);
        //alert(balance + 1);
      }
     
  } // fin de la funcion toggle_seleccion

  function mostrar_credit_display(credito) {
    // visualizar el credito en un formato apropiado led ej. "0012"
    var credito = parseInt(credito); // me aseguro trabajar castin integer type.
    var formato = "";
    
    if(credito <= 9){
      formato = "000"+ credito;
    }

     if((credito >= 10) && (credito <= 99)){
      formato = "00" + credito;
    }

    if((credito >= 100) && (credito <= 999)){
      formato = "0" + credito;
    }

    if(credito >= 1000){
      formato = "" + credito;
    }

    document.getElementById('credit_display').innerHTML = formato;
  }

var vuelta = 0; // variable global para controlar las vueltas de ronda_spin_game_fast
var ronda_spin_game_fast_b_flag = false ; // flag de control para saber si es la ronda con el ciclo del spin round en b (el que empieza en 9  no en cero ok ted.)
var flag_autoplay = false; // inicializo el falg de autoplay para su posterior revision en funcion ok.
var autoplay_counter_round = 0; // contador de rondas autoplay, esto para tener un liminte de jugadas auto.


function reset_vuelta_counter(){
  vuelta = 0; // esta funcion resetea la variable gobal vuelta.
}


// ronda_spin_game_fast_determiner determina cual animacion vamos a presentar
function ronda_spin_game_fast_determiner() {
  //aprovecho y reseteo el contador de mq sola minutos porque hay ronda ok:
  mq_sola_minutosx5 = 0;
  contador_animacion = 0;
  //Continuo con la logica de esta funcion ok.
  if ( (server_win_position == 5 ) || (server_win_position == 6 ) || (server_win_position == 7 ) || (server_win_position == 8 ) || (server_win_position == 9 ) || (server_win_position == 10 ) || (server_win_position == 11 ) ) {
   ronda_spin_game_fast_b_flag = false;
   ronda_spin_game_fast(4, 100, 100); // ronda normal classic

  } else {
   ronda_spin_game_fast_b_flag = true; // activo flag indicador. ok.
   ronda_spin_game_fast_b(4, 100, 100); // esta es la que empieza en 9

  }
  
}


  function ronda_spin_game_fast(factor, sonido, posicion){
   
    
    setTimeout(function() {
        //your code to be executed after x seconds   
       if( 1 < posicion ){
          document.getElementById("spin_0").style.visibility =  "visible";
        }  

      }, 0);

    setTimeout(function() {
         //your code to be executed after x seconds
       document.getElementById("spin_0").style.visibility =  "hidden";
       if( sonido == 1){
         document.getElementById('sound2').load(); 
       } 
       if(posicion == 1){
          document.getElementById("spin_0").style.visibility =  "visible";   
        }
        if( sonido == 1 ){
         parar_spin_y_sonido_ganador();
         actualizar_valores();
       }
        
       if( sonido == 1 ){
//         document.getElementById('sound4').play(); 
       }   
       //document.getElementById('sound4').play();
      }, 200/factor);

    setTimeout(function() {
        //your code to be executed after x seconds   
       if( 2 < posicion ){
          document.getElementById("spin_5").style.visibility =  "visible";
        }   
      
      }, 200/factor);

    setTimeout(function() {
        //your code to be executed after x seconds
       document.getElementById("spin_5").style.visibility =  "hidden";
       if( sonido == 2){
         document.getElementById('sound2').load(); 
       } 
       if(posicion == 2){
          document.getElementById("spin_5").style.visibility =  "visible";   
        }
        if( sonido == 2 ){
         parar_spin_y_sonido_ganador();
         actualizar_valores();
       }
        
       if( sonido == 1 ){
//         document.getElementById('sound4').play(); 
       }   
       //document.getElementById('sound4').play();
      }, 400/factor);

    setTimeout(function() {
        //your code to be executed after x seconds   
       if( 3 < posicion ){
          document.getElementById("spin_12").style.visibility =  "visible";
        }   
       if( sonido == 1 ){
       //  document.getElementById('sound22').play(); 

       }  
       if( sonido == 2 ){
        // document.getElementById('sound4').play(); 
       }   
       //document.getElementById('sound4').play();
      }, 400/factor);

    setTimeout(function() {
         //your code to be executed after x seconds
       document.getElementById("spin_12").style.visibility =  "hidden";
       if( sonido == 3){
         document.getElementById('sound2').load(); 
       } 
       if(posicion == 3){
          document.getElementById("spin_12").style.visibility =  "visible";   
        }
        if( sonido == 3 ){
         parar_spin_y_sonido_ganador();
         actualizar_valores();
       }
        
       if( sonido == 1 ){
//         document.getElementById('sound4').play(); 
       }   
       //document.getElementById('sound4').play();
      }, 600/factor);

    setTimeout(function() {
        //your code to be executed after x seconds   
       if( 4 < posicion ){
          document.getElementById("spin_3").style.visibility =  "visible";
        }   
       if( sonido == 2 ){
        // document.getElementById('sound4').play(); 
       }   
       //document.getElementById('sound4').play();
      }, 600/factor);

    setTimeout(function() {
        //your code to be executed after x seconds
       document.getElementById("spin_3").style.visibility =  "hidden";
       if( sonido == 4){
         document.getElementById('sound2').load(); 
       } 
       if(posicion == 4){
          document.getElementById("spin_3").style.visibility =  "visible";   
        }
        if( sonido == 4 ){
         parar_spin_y_sonido_ganador();
         actualizar_valores();
       }
        
       if( sonido == 1 ){
//         document.getElementById('sound4').play(); 
       }   
       //document.getElementById('sound4').play();
      }, 800/factor);

    setTimeout(function() {
        //your code to be executed after x seconds   
       if( 5 < posicion ){
          document.getElementById("spin_10").style.visibility =  "visible";
        }   
       if( sonido == 1 ){
        // document.getElementById('sound24').play(); 

       }  
       if( sonido == 9 ){
         //document.getElementById('sound2').load(); 
       }  
       //document.getElementById('sound4').play();
      }, 800/factor);

    setTimeout(function() {
        //your code to be executed after x seconds
       document.getElementById("spin_10").style.visibility =  "hidden";
       if( sonido == 5){
         document.getElementById('sound2').load(); 
       } 
       if(posicion == 5){
          document.getElementById("spin_10").style.visibility =  "visible";   
        }
        if( sonido == 5 ){
         parar_spin_y_sonido_ganador();
         actualizar_valores();
       }
        
       if( sonido == 1 ){
//         document.getElementById('sound4').play(); 
       }   
       //document.getElementById('sound4').play();
      }, 1000/factor);

    setTimeout(function() {
        //your code to be executed after x seconds   
       if( 6 < posicion ){
          document.getElementById("spin_1").style.visibility =  "visible";
        }   

       if( sonido == 1 ){
      //   document.getElementById('sound25').play(); 

       }  
       if( sonido == 2 ){
       //  document.getElementById('sound4').play(); 
       }  
       //document.getElementById('sound4').play();
      }, 1000/factor);

    setTimeout(function() {
        //your code to be executed after x seconds
       document.getElementById("spin_1").style.visibility =  "hidden";
       if( sonido == 6){
         document.getElementById('sound2').load(); 
       } 
       if(posicion == 6){
          document.getElementById("spin_1").style.visibility =  "visible";   
        }
        if( sonido == 6 ){
         parar_spin_y_sonido_ganador();
         actualizar_valores();
       }
        
       if( sonido == 1 ){
//         document.getElementById('sound4').play(); 
       }   
       //document.getElementById('sound4').play();
      }, 1200/factor);

    setTimeout(function() {
        //your code to be executed after x seconds
        if( 7 < posicion ){
          document.getElementById("spin_8").style.visibility =  "visible";
        }  
       
       if( sonido == 1 ){
       //  document.getElementById('sound26').play(); 

       }  
       if( sonido == 2 ){
       //  document.getElementById('sound4').play(); 
       }  
       //document.getElementById('sound4').play();
      }, 1200/factor);

    setTimeout(function() {
       //your code to be executed after x seconds
       document.getElementById("spin_8").style.visibility =  "hidden";
       if( sonido == 7){
         document.getElementById('sound2').load(); 
       } 
       if(posicion == 7){
          document.getElementById("spin_8").style.visibility =  "visible";   
        }
        if( sonido == 7 ){
         parar_spin_y_sonido_ganador();
         actualizar_valores();
       }
        
       if( sonido == 1 ){
//         document.getElementById('sound4').play(); 
       }   
       //document.getElementById('sound4').play();
      }, 1400/factor);

    setTimeout(function() {
        //your code to be executed after x seconds
         if(8 < posicion){
          document.getElementById("spin_9").style.visibility =  "visible";
        }
       //document.getElementById("spin_9").style.visibility =  "visible";
       if( sonido == 1 ){
       //  document.getElementById('sound27').play(); 

       }  
       if( sonido == 2 ){
       //  document.getElementById('sound4').play(); 
       }   
       //document.getElementById('sound4').play();
      }, 1400/factor);

    setTimeout(function() {
       //your code to be executed after x seconds
       document.getElementById("spin_9").style.visibility =  "hidden";
       if( sonido == 8){
         document.getElementById('sound2').load(); 
       } 
       if(posicion == 8){
          document.getElementById("spin_9").style.visibility =  "visible";   
        }
        if( sonido == 8 ){
         parar_spin_y_sonido_ganador();
         actualizar_valores();
       }
        
       if( sonido == 1 ){
//         document.getElementById('sound4').play(); 
       }   
       //document.getElementById('sound4').play();
      }, 1600/factor);

    setTimeout(function() {
        //your code to be executed after x seconds
        if(9 < posicion){
          document.getElementById("spin_2").style.visibility =  "visible";
        }
      // document.getElementById("spin_2").style.visibility =  "visible";
       if( sonido == 1 ){
       //  document.getElementById('sound28').play(); 

       }  
       if( sonido == 2 ){
      //   document.getElementById('sound4').play(); 
       }  
       //document.getElementById('sound4').play();
      }, 1600/factor);

    setTimeout(function() {
        //your code to be executed after x seconds
       document.getElementById("spin_2").style.visibility =  "hidden";
       if( sonido == 9){
         document.getElementById('sound2').load(); 
       } 
       if(posicion == 9){
          document.getElementById("spin_2").style.visibility =  "visible";   
        }
        if( sonido == 9 ){
         parar_spin_y_sonido_ganador();
         actualizar_valores();
       }
        
       if( sonido == 1 ){
//         document.getElementById('sound4').play(); 
       }   
       //document.getElementById('sound4').play();
      }, 1800/factor);

    setTimeout(function() {
        //your code to be executed after x seconds
        if(10 < posicion){
          document.getElementById("spin_7").style.visibility =  "visible";
        }
      // document.getElementById("spin_7").style.visibility =  "visible";
       if( sonido == 1 ){
       //  document.getElementById('sound29').play(); 

       }  
       if( sonido == 2 ){
       //  document.getElementById('sound4').play(); 
       }  
       //document.getElementById('sound4').play();
      }, 1800/factor);

    setTimeout(function() {
        //your code to be executed after x seconds
       document.getElementById("spin_7").style.visibility =  "hidden";
       if(posicion == 10){
          document.getElementById("spin_7").style.visibility =  "visible";   
       }
       if( sonido == 10 ){
         parar_spin_y_sonido_ganador();
         actualizar_valores();
       } 
       if( sonido == 1 ){
//         document.getElementById('sound4').play(); 
       }   
       //document.getElementById('sound4').play();
      }, 2000/factor);

     setTimeout(function() {
        //your code to be executed after x seconds
        if(11 < posicion){
          document.getElementById("spin_6").style.visibility =  "visible";
        }
       //document.getElementById("spin_6").style.visibility =  "visible";
       if( sonido == 1 ){
       //  document.getElementById('sound30').play(); 

       }  
       if( sonido == 2 ){
       //  document.getElementById('sound4').play(); 
       }   
       //document.getElementById('sound4').play();
      }, 2000/factor);

    setTimeout(function() {
        //your code to be executed after x seconds
       document.getElementById("spin_6").style.visibility =  "hidden";
       if(posicion == 11){
          document.getElementById("spin_6").style.visibility =  "visible";   
        }
        if( sonido == 11 ){
         parar_spin_y_sonido_ganador();
         actualizar_valores();
       } 
       if( sonido == 1 ){
 //        document.getElementById('sound4').play(); 
       }   
       //document.getElementById('sound4').play();
      }, 2200/factor);

    setTimeout(function() {
        //your code to be executed after x seconds
         if(12 < posicion){
          document.getElementById("spin_11").style.visibility =  "visible";
        }
       //document.getElementById("spin_11").style.visibility =  "visible";
       if( sonido == 1 ){
       //  document.getElementById('sound31').play(); 

       }  
       if( sonido == 2 ){
       //  document.getElementById('sound4').play(); 
       }  
       //document.getElementById('sound4').play();
      }, 2200/factor);

    setTimeout(function() {
        //your code to be executed after x seconds
       document.getElementById("spin_11").style.visibility =  "hidden";
       if(posicion == 12){
          document.getElementById("spin_11").style.visibility =  "visible";   
        }
        if( sonido == 12 ){
         parar_spin_y_sonido_ganador();
         actualizar_valores();
       } 
       if( sonido == 1 ){
//         document.getElementById('sound4').play(); 
       }   
       //document.getElementById('sound4').play();
      }, 2400/factor);

    setTimeout(function() {
        //your code to be executed after x seconds
         if(13 < posicion){
          document.getElementById("spin_4").style.visibility =  "visible";
        }
       //document.getElementById("spin_4").style.visibility =  "visible";
       if( sonido == 1 ){
        // document.getElementById('sound32').play(); 

       }  
       if( sonido == 2 ){
       //  document.getElementById('sound4').play(); 
       } 
       //document.getElementById('sound4').play();
      }, 2400/factor);

    setTimeout(function() {
        //your code to be executed after x seconds
       document.getElementById("spin_4").style.visibility =  "hidden";
       if(posicion == 13){
          document.getElementById("spin_4").style.visibility =  "visible";   
        }
       if( sonido == 13 ){
         parar_spin_y_sonido_ganador();
         actualizar_valores();
       } 
       if( sonido == 1 ){
//         document.getElementById('sound4').play(); 
       }   
       //document.getElementById('sound4').play();
      }, 2600/factor);

    if (vuelta < 3) {
        vuelta++;
        setTimeout(function() {
            //your code to be executed after x seconds
           //document.getElementById("spin_4").style.visibility =  "hidden";  
           ronda_spin_game_fast(factor, 100, 100);
           sonarporbtn(); 
           //document.getElementById('sound4').play();
          }, 2600/factor);
    }

    if (vuelta == 3) {
        vuelta++;
        setTimeout(function() {
          
            //your code to be executed after x seconds
           //document.getElementById("spin_4").style.visibility =  "hidden";  
           ronda_spin_game_fast((factor/2), 100, 100);
           //document.getElementById('sound4').play();
          }, 2600*2/factor );
    }

    if (vuelta == 4) {
        vuelta++;
        setTimeout(function() {
          
            //your code to be executed after x seconds
           //document.getElementById("spin_4").style.visibility =  "hidden";  
           ronda_spin_game_fast((factor/4), 100, 100);
           //document.getElementById('sound4').play();
          }, 2600*4/factor );
    }

     if (vuelta == 5) {
        vuelta++;

        setTimeout(function() {
          
            //your code to be executed after x seconds
           //document.getElementById("spin_4").style.visibility =  "hidden";  
           ronda_spin_game_fast((factor/8), server_win_position, server_win_position);//params:factor,sonido, posicicion
           //document.getElementById('sound4').play();
         //  document.getElementById('sound1').pause();
   //        document.getElementById('sound1').load();
           // esto en iphone con safari IOS <~ 11.0 no quiere funcionar ambos sondios. probar con chrome o firefox en ios, mientras tanto el development continuara para androis samsung galaxy s5 con chrome, html audio tags are working ok there. ok ted para avanzar.
          }, 2600*8/factor );
    }

     if (vuelta == 66) {
        vuelta++;
        setTimeout(function() {
          
            //your code to be executed after x seconds
           //document.getElementById("spin_4").style.visibility =  "hidden";  
           ronda_spin_game_fast((factor/8), 100,100);
           
          }, 2600*16/factor );  // (factor/32) y 2600*16/factor seria el prox ciclo
    }
//PDTE UNA SOLA MUSICA, QUITAR SONIDO LAST-1 ROUND Y CONTINUAR, IMAGINAR SONIDO TROCHE



  } //fin de la funcion ronda_spin_game_fast. nota: 0,3 puede ser factor final





function ronda_spin_game_fast_b(factor, sonido, posicion) {
  //alert("Estamos en b");
  // body...


    
    setTimeout(function() {
        //your code to be executed after x seconds   
       if( (8 < posicion) || ( ronda_spin_game_fast_b_flag == true) ){
          document.getElementById("spin_9").style.visibility =  "visible";
          //ronda_spin_game_fast_b_flag = false;
        }  

      }, 0);

    setTimeout(function() {
         //your code to be executed after x seconds
       document.getElementById("spin_9").style.visibility =  "hidden";
       if( sonido == 8){
         document.getElementById('sound2').load(); 
       } 
       if(posicion == 8){
          document.getElementById("spin_9").style.visibility =  "visible";   
        }
        if( sonido == 8 ){
         parar_spin_y_sonido_ganador();
         actualizar_valores();
       }
        
       if( sonido == 8 ){
//         document.getElementById('sound4').play(); 
       }   
       //document.getElementById('sound4').play();
      }, 200/factor);

    setTimeout(function() {
        //your code to be executed after x seconds   
       if( (9 < posicion) || ( ronda_spin_game_fast_b_flag == true) ){
          document.getElementById("spin_2").style.visibility =  "visible";
        //  ronda_spin_game_fast_b_flag = false ; 
        }   
      
      }, 200/factor);

    setTimeout(function() {
        //your code to be executed after x seconds
       document.getElementById("spin_2").style.visibility =  "hidden";
       if( sonido == 9){
         document.getElementById('sound2').load(); 
       } 
       if(posicion == 9){
          document.getElementById("spin_2").style.visibility =  "visible";   
        }
        if( sonido == 9 ){
         parar_spin_y_sonido_ganador();
         actualizar_valores();
       }
        
       if( sonido == 9 ){
//         document.getElementById('sound4').play(); 
       }   
       //document.getElementById('sound4').play();
      }, 400/factor);

    setTimeout(function() {
        //your code to be executed after x seconds   
       if( (10 < posicion) || ( ronda_spin_game_fast_b_flag == true ) ){
          document.getElementById("spin_7").style.visibility =  "visible";
          //ronda_spin_game_fast_b_flag = false;
        }   
       if( sonido == 1 ){
       //  document.getElementById('sound22').play(); 

       }  
       if( sonido == 2 ){
        // document.getElementById('sound4').play(); 
       }   
       //document.getElementById('sound4').play();
      }, 400/factor);

    setTimeout(function() {
         //your code to be executed after x seconds
       document.getElementById("spin_7").style.visibility =  "hidden";
       if( sonido == 10){
         document.getElementById('sound2').load(); 
       } 
       if(posicion == 10){
          document.getElementById("spin_7").style.visibility =  "visible";   
        }
        if( sonido == 10 ){
         parar_spin_y_sonido_ganador();
         actualizar_valores();
       }
        
       if( sonido == 1 ){
//         document.getElementById('sound4').play(); 
       }   
       //document.getElementById('sound4').play();
      }, 600/factor);

    setTimeout(function() {
        //your code to be executed after x seconds   
       if( (11 < posicion) || ( ronda_spin_game_fast_b_flag == true ) ){
          document.getElementById("spin_6").style.visibility =  "visible";
          //ronda_spin_game_fast_b_flag = false;
        }   
       if( sonido == 2 ){
        // document.getElementById('sound4').play(); 
       }   
       //document.getElementById('sound4').play();
      }, 600/factor);

    setTimeout(function() {
        //your code to be executed after x seconds
       document.getElementById("spin_6").style.visibility =  "hidden";
       if( sonido == 11){
         document.getElementById('sound2').load(); 
       } 
       if(posicion == 11){
          document.getElementById("spin_6").style.visibility =  "visible";   
        }
        if( sonido == 11 ){
         parar_spin_y_sonido_ganador();
         actualizar_valores();
       }
        
       if( sonido == 1 ){
//         document.getElementById('sound4').play(); 
       }   
       //document.getElementById('sound4').play();
      }, 800/factor);

    setTimeout(function() {
        //your code to be executed after x seconds   
       if( ( (12 < posicion) || ( ronda_spin_game_fast_b_flag == true ) ) && (posicion != 12) ){
          document.getElementById("spin_11").style.visibility =  "visible";
          //ronda_spin_game_fast_b_flag = false;
        }   
       if( sonido == 12 ){
        // document.getElementById('sound24').play(); 

       }  
       if( sonido == 2 ){
         //document.getElementById('sound2').load(); 
       }  
       //document.getElementById('sound4').play();
      }, 800/factor);

    setTimeout(function() {
        //your code to be executed after x seconds
       document.getElementById("spin_11").style.visibility =  "hidden";
       if( sonido == 12){
         document.getElementById('sound2').load(); 
       } 

       if(posicion == 12){
      //   setTimeout(function() {
           document.getElementById("spin_11").style.visibility =  "visible"; 
      //     }, 100);  
        }

        if( sonido == 12 ){
         parar_spin_y_sonido_ganador();
         actualizar_valores();
       }
        
       if( sonido == 1 ){
//         document.getElementById('sound4').play(); 
       }   
       //document.getElementById('sound4').play();
      }, 1000/factor);

    setTimeout(function() {
        //your code to be executed after x seconds   
       if( ( (13 < posicion) || ( ronda_spin_game_fast_b_flag == true ) ) && ( vuelta != 7 ) && (posicion != 12) && (posicion != 13) ) {
          document.getElementById("spin_4").style.visibility =  "visible";
          //ronda_spin_game_fast_b_flag = false;
        }   

       if( sonido == 1 ){
      //   document.getElementById('sound25').play(); 

       }  
       if( sonido == 2 ){
       //  document.getElementById('sound4').play(); 
       }  
       //document.getElementById('sound4').play();
      }, 1000/factor);

    setTimeout(function() {
        //your code to be executed after x seconds
       document.getElementById("spin_4").style.visibility =  "hidden";
       if( sonido == 13){
         document.getElementById('sound2').load(); 
       } 
       if(posicion == 13){
          document.getElementById("spin_4").style.visibility =  "visible";   
        }
        if( sonido == 13 ){
         parar_spin_y_sonido_ganador();
         actualizar_valores();
       }
        
       if( sonido == 1 ){
//         document.getElementById('sound4').play(); 
       }   
       //document.getElementById('sound4').play();
      }, 1200/factor);

    setTimeout(function() {
        //your code to be executed after x seconds
        // ajuste provisional para ronda spin funcion b empieza en 9 no en cero ok:
        if( (1 < posicion) && ( vuelta != 7 ) && (posicion != 12)  && (posicion != 13) ){
          document.getElementById("spin_0").style.visibility =  "visible";
        }  
       
       if( sonido == 1 ){
       //  document.getElementById('sound26').play(); 

       }  
       if( sonido == 2 ){
       //  document.getElementById('sound4').play(); 
       }  
       //document.getElementById('sound4').play();
      }, 1200/factor);

    setTimeout(function() {
       //your code to be executed after x seconds
       document.getElementById("spin_0").style.visibility =  "hidden";
       if( sonido == 1){
         document.getElementById('sound2').load(); 
       } 
       if(posicion == 1){
          document.getElementById("spin_0").style.visibility =  "visible";   
        }
        if( sonido == 1 ){
         parar_spin_y_sonido_ganador();
         actualizar_valores();
       }
        
       if( sonido == 1 ){
//         document.getElementById('sound4').play(); 
       }   
       //document.getElementById('sound4').play();
      }, 1400/factor);

    setTimeout(function() {
        //your code to be executed after x seconds
         if( (2 < posicion) && ( vuelta != 7 ) && (posicion != 12)  && (posicion != 13) ) {
          document.getElementById("spin_5").style.visibility =  "visible";
        }
       //document.getElementById("spin_9").style.visibility =  "visible";
       if( sonido == 1 ){
       //  document.getElementById('sound27').play(); 

       }  
       if( sonido == 2 ){
       //  document.getElementById('sound4').play(); 
       }   
       //document.getElementById('sound4').play();
      }, 1400/factor);

    setTimeout(function() {
       //your code to be executed after x seconds
       document.getElementById("spin_5").style.visibility =  "hidden";
       if( sonido == 2){
         document.getElementById('sound2').load(); 
       } 
       if(posicion == 2){
          document.getElementById("spin_5").style.visibility =  "visible";   
        }
        if( sonido == 2 ){
         parar_spin_y_sonido_ganador();
         actualizar_valores();
       }
        
       if( sonido == 1 ){
//         document.getElementById('sound4').play(); 
       }   
       //document.getElementById('sound4').play();
      }, 1600/factor);

    setTimeout(function() {
        //your code to be executed after x seconds
        if( (3 < posicion) && ( vuelta != 7 ) && (posicion != 12)  && (posicion != 13)  ){
          document.getElementById("spin_12").style.visibility =  "visible";
        }
      // document.getElementById("spin_2").style.visibility =  "visible";
       if( sonido == 1 ){
       //  document.getElementById('sound28').play(); 

       }  
       if( sonido == 2 ){
      //   document.getElementById('sound4').play(); 
       }  
       //document.getElementById('sound4').play();
      }, 1600/factor);

    setTimeout(function() {
        //your code to be executed after x seconds
       document.getElementById("spin_12").style.visibility =  "hidden";
       if( sonido == 3){
         document.getElementById('sound2').load(); 
       } 
       if(posicion == 3){
          document.getElementById("spin_12").style.visibility =  "visible";   
        }
        if( sonido == 3 ){
         parar_spin_y_sonido_ganador();
         actualizar_valores();
       }
        
       if( sonido == 1 ){
//         document.getElementById('sound4').play(); 
       }   
       //document.getElementById('sound4').play();
      }, 1800/factor);

    setTimeout(function() {
        //your code to be executed after x seconds
        if( (4 < posicion) && ( vuelta != 7 ) && (posicion != 12)  && (posicion != 13) ){
          document.getElementById("spin_3").style.visibility =  "visible";
        }
      // document.getElementById("spin_7").style.visibility =  "visible";
       if( sonido == 1 ){
       //  document.getElementById('sound29').play(); 

       }  
       if( sonido == 2 ){
       //  document.getElementById('sound4').play(); 
       }  
       //document.getElementById('sound4').play();
      }, 1800/factor);

    setTimeout(function() {
        //your code to be executed after x seconds
       document.getElementById("spin_3").style.visibility =  "hidden";
       if(posicion == 4){
          document.getElementById("spin_3").style.visibility =  "visible";   
       }
       if( sonido == 4 ){
         parar_spin_y_sonido_ganador();
         actualizar_valores();
       } 
       if( sonido == 1 ){
//         document.getElementById('sound4').play(); 
       }   
       //document.getElementById('sound4').play();
      }, 2000/factor);

     setTimeout(function() {
        //your code to be executed after x seconds
        if( (5 < posicion) && ( vuelta != 7 ) && (posicion != 12)  && (posicion != 13) ){
          document.getElementById("spin_10").style.visibility =  "visible";
        }
       //document.getElementById("spin_6").style.visibility =  "visible";
       if( sonido == 1 ){
       //  document.getElementById('sound30').play(); 

       }  
       if( sonido == 2 ){
       //  document.getElementById('sound4').play(); 
       }   
       //document.getElementById('sound4').play();
      }, 2000/factor);

    setTimeout(function() {
        //your code to be executed after x seconds
       document.getElementById("spin_10").style.visibility =  "hidden";
       if(posicion == 5){
          document.getElementById("spin_10").style.visibility =  "visible";   
        }
        if( sonido == 5 ){
         parar_spin_y_sonido_ganador();
         actualizar_valores();
       } 
       if( sonido == 1 ){
 //        document.getElementById('sound4').play(); 
       }   
       //document.getElementById('sound4').play();
      }, 2200/factor);

    setTimeout(function() {
        //your code to be executed after x seconds
         if( (6 < posicion) && ( vuelta != 7 ) && (posicion != 12)  && (posicion != 13) ){
          document.getElementById("spin_1").style.visibility =  "visible";
        }
       //document.getElementById("spin_11").style.visibility =  "visible";
       if( sonido == 1 ){
       //  document.getElementById('sound31').play(); 

       }  
       if( sonido == 2 ){
       //  document.getElementById('sound4').play(); 
       }  
       //document.getElementById('sound4').play();
      }, 2200/factor);

    setTimeout(function() {
        //your code to be executed after x seconds
       document.getElementById("spin_1").style.visibility =  "hidden";
       if(posicion == 6){
          document.getElementById("spin_1").style.visibility =  "visible";   
        }
        if( sonido == 6 ){
         parar_spin_y_sonido_ganador();
         actualizar_valores();
       } 
       if( sonido == 1 ){
//         document.getElementById('sound4').play(); 
       }   
       //document.getElementById('sound4').play();
      }, 2400/factor);

    setTimeout(function() {
        //your code to be executed after x seconds
         if( (7 < posicion) && ( vuelta != 7 ) && (posicion != 12)  && (posicion != 13) ){
          document.getElementById("spin_8").style.visibility =  "visible";
        }
       //document.getElementById("spin_4").style.visibility =  "visible";
       if( sonido == 1 ){
        // document.getElementById('sound32').play(); 

       }  
       if( sonido == 2 ){
       //  document.getElementById('sound4').play(); 
       } 
       //document.getElementById('sound4').play();
      }, 2400/factor);

    setTimeout(function() {
        //your code to be executed after x seconds
       document.getElementById("spin_8").style.visibility =  "hidden";
       if(posicion == 7){
          document.getElementById("spin_8").style.visibility =  "visible";   
        }
       if( sonido == 7 ){
         parar_spin_y_sonido_ganador();
         actualizar_valores();
       } 
       if( sonido == 1 ){
//         document.getElementById('sound4').play(); 
       }   
       //document.getElementById('sound4').play();
      }, 2600/factor);

    if (vuelta < 3) {
        vuelta++;
        setTimeout(function() {
            //your code to be executed after x seconds
           //document.getElementById("spin_4").style.visibility =  "hidden";  
           ronda_spin_game_fast_b(factor, 100, 100);
           sonarporbtn(); 
           //document.getElementById('sound4').play();
          }, 2600/factor);
    }

    if (vuelta == 3) {
        vuelta++;
        setTimeout(function() {
          
            //your code to be executed after x seconds
           //document.getElementById("spin_4").style.visibility =  "hidden";  
           ronda_spin_game_fast_b((factor/2), 100, 100);
           //document.getElementById('sound4').play();
          }, 2600*2/factor );
    }

    if (vuelta == 4) {
        vuelta++;
        setTimeout(function() {
          
            //your code to be executed after x seconds
           //document.getElementById("spin_4").style.visibility =  "hidden";  
           ronda_spin_game_fast_b((factor/4), 100, 100);
           //document.getElementById('sound4').play();
          }, 2600*4/factor );
    }

     if (vuelta == 5) {
        vuelta++;

        setTimeout(function() {
          
            //your code to be executed after x seconds
           //document.getElementById("spin_4").style.visibility =  "hidden";  
           ronda_spin_game_fast_b((factor/8), server_win_position , server_win_position );//params:factor,sonido, posicicion
           //document.getElementById('sound4').play();
         //  document.getElementById('sound1').pause();
   //        document.getElementById('sound1').load();
           // esto en iphone con safari IOS <~ 11.0 no quiere funcionar ambos sondios. probar con chrome o firefox en ios, mientras tanto el development continuara para androis samsung galaxy s5 con chrome, html audio tags are working ok there. ok ted para avanzar.
          }, 2600*8/factor );
    }

     if (vuelta == 66) {
        vuelta++;
        setTimeout(function() {
          
            //your code to be executed after x seconds
           //document.getElementById("spin_4").style.visibility =  "hidden";  
           ronda_spin_game_fast_b((factor/8), 100,100);
           
          }, 2600*16/factor );  // (factor/32) y 2600*16/factor seria el prox ciclo
    }
//PDTE UNA SOLA MUSICA, QUITAR SONIDO LAST-1 ROUND Y CONTINUAR, IMAGINAR SONIDO TROCHE






}  //fin de la funcion ronda_spin_game_fast_b. 


  
</script>


